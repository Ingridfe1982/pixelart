{"version":3,"sources":["jscolor.js"],"names":["global","factory","module","exports","document","win","Error","window","jscolor","jsc","initialized","instances","readyQueue","register","addEventListener","pub","init","installBySelector","selector","rootNode","node","elms","querySelectorAll","matchClass","RegExp","lookupClass","i","length","type","undefined","toLowerCase","isColorAttrSupported","dataOpts","m","getDataAttr","className","match","targetElm","optsStr","console","warn","docsRef","opts","trim","parseOptionsStr","e","str","JSON","parse","eParse","looseJSON","Function","eEval","getInstances","inst","targetElement","push","createEl","tagName","el","createElement","setData","nodeOrSelector","sel","querySelector","isNode","val","Node","nodeType","nodeName","removeChildren","firstChild","removeChild","isTextInput","isButton","n","indexOf","isButtonEmpty","value","textContent","isPassiveEventSupported","supported","Object","defineProperty","get","removeEventListener","elm","setAttribute","dataProp","obj","arguments","data","hasOwnProperty","prop","map","removeData","getData","setDefault","name","attrName","attrValue","getAttribute","setDataAttr","_attachedGroupEvents","attachGroupEvent","groupName","evnt","func","detachGroupEvents","evt","preventDefault","returnValue","captureTarget","target","setCapture","_capturedTarget","releaseTarget","releaseCapture","triggerEvent","eventName","bubbles","cancelable","ev","Event","createEvent","initEvent","dispatchEvent","triggerInputEvent","eventKey","keys","code","keyCode","strList","replace","split","hasClass","classList","contains","addClass","classNames","add","removeClass","remove","repl","getCompStyle","compStyle","getComputedStyle","currentStyle","setStyle","styles","important","reversible","priority","origStyle","setVal","style","setProperty","hexColor","r","g","b","Math","round","toString","substr","toUpperCase","hexaColor","a","rgbColor","rgbaColor","linearGradient","getFuncName","stdName","prefixes","helper","tryFunc","tryVal","background","funcName","Array","prototype","join","call","setBorderRadius","setBoxShadow","getElementPos","relativeToViewport","x","y","rect","getBoundingClientRect","left","top","viewPos","getViewPos","getElementSize","offsetWidth","offsetHeight","getAbsPointerPos","changedTouches","clientX","clientY","getRelPointerPos","srcElement","targetRect","doc","documentElement","pageXOffset","scrollLeft","clientLeft","pageYOffset","scrollTop","clientTop","getViewSize","innerWidth","clientWidth","innerHeight","clientHeight","RGB_HSV","min","v","max","h","HSV_RGB","s","u","floor","f","parseColorString","ret","rgba","format","parseInt","charAt","par","re","mR","mG","mB","mA","parseFloat","parsePaletteValue","mixed","vals","isArray","colors","color","containsTranparentColor","isAlphaFormat","scaleCanvasForHighDPR","canvas","dpr","devicePixelRatio","width","height","ctx","getContext","scale","genColorPreviewCanvas","separatorPos","specWidth","scaleForHighDPR","sepW","previewSeparator","sqSize","chessboardSize","sqColor1","chessboardColor1","sqColor2","chessboardColor2","cWidth","cHeight","fillStyle","fillRect","start","clearRect","lineWidth","beginPath","strokeStyle","moveTo","lineTo","stroke","genColorPreviewGradient","position","params","apply","redrawPosition","picker","owner","thisObj","tp","vp","fixed","ts","vs","pd","getPickerDims","ps","borderW","borderH","c","l","smartPosition","pp","positionValue","contractShadow","_drawPosition","vShadow","shadowBlur","wrap","boxS","shadow","BoxShadow","shadowColor","w","controlBorderWidth","sliderSpace","getControlPadding","sliderSize","getSliderChannel","hasAlphaChannel","pal","getPaletteDims","padding","closeButton","buttonHeight","pW","pH","contentW","contentH","paddedW","paddedH","borderWidth","palette","cols","rows","cellW","cellH","sampleCount","_palette","paletteCols","ceil","paletteSpacing","paletteHeight","pointerBorderWidth","pointerThickness","getPadYChannel","mode","triggerCallback","callback","error","triggerGlobal","eventNames","trigger","_pointerMoveEvent","mouse","touch","_pointerEndEvent","_pointerOrigin","onDocumentKeyUp","tryHide","onWindowResize","onWindowScroll","onParentScroll","onDocumentMouseDown","showOnClick","disabled","show","control","onControlPointerStart","onPickerTouchStart","controlName","pointerType","registerDragEvents","offset","onDocumentPointerMove","onDocumentPointerEnd","parent","frameElement","ofs","abs","rel","channels","fromHSVA","setPad","setSld","setASld","onPaletteSampleClick","currentTarget","_setFormat","getFormat","paletteSetsAlpha","_paletteHasTransparency","fromRGBA","hideOnPaletteClick","hide","ofsX","ofsY","pointerAbs","xVal","yVal","fmt","createPadCanvas","draw","drawFunc","hGrad","createLinearGradient","addColorStop","vGrad","createSliderGradient","color1","color2","grad","createASliderGradient","hShadow","blur","spread","inset","flags","leaveValue","leaveAlpha","leavePreview","enumOpts","previewPosition","alphaChannel","deprecatedOpts","THIS","alpha","onChange","onInput","valueElement","alphaElement","previewElement","previewSize","previewPadding","required","hash","uppercase","forceStyle","hideOnLeave","crossSize","closeText","buttonColor","backgroundColor","borderColor","borderRadius","controlBorderColor","pointerColor","pointerBorderColor","zIndex","container","minS","maxS","minV","maxV","minA","maxA","option","getOption","setOption","redraw","exposeColor","success","opt","channel","res","evs","callbackProp","isNaN","rgb","hsv","fromHSV","fromRGB","fromString","setPreviewElementBg","setValueElementValue","toHEXString","toHEXAString","toRGBString","toRGBAString","toGrayscale","toCanvas","toDataURL","toBackground","isLight","isPickerOwner","detachPicker","drawPicker","_currentFormat","processValueInput","processAlphaInput","colorStr","alphaVal","setAlphaElementValue","previewPos","redrawPad","redrawSld","redrawASld","backgrounds","image","size","repeat","origin","preview","bg","sty","right","innerHTML","_processParentElementsInDOM","_parentElementsProcessed","parentNode","set__palette","oldOpt","newOpt","setter","getter","activeClassName","box","boxB","pad","padB","padM","padCanvas","cross","crossBY","crossBX","crossLY","crossLX","sld","sldB","sldM","sldGrad","sldPtrS","sldPtrIB","sldPtrMB","sldPtrOB","asld","asldB","asldM","asldGrad","asldPtrS","asldPtrIB","asldPtrMB","asldPtrOB","btn","btnT","appendChild","passive","p","displaySlider","displayAlphaSlider","pickerDims","crossOuterSize","controlPadding","PI","padCursor","clear","border","opacity","cursor","instance","overflow","display","sliderInnerSpace","chessboard","si","sampleColor","sampleCssColor","sc","sw","backgroundImage","backgroundRepeat","backgroundPosition","setBtnBorder","insetColors","outsetColor","btnPadding","bottom","maxWidth","whiteSpace","font","textAlign","onmousedown","lineHeight","createTextNode","body","yChannel","rgb1","rgb2","sldChannel","onValueKeyDown","onAlphaKeyDown","onValueChange","oldVal","onAlphaChange","onValueInput","onAlphaInput","options","presetsArr","preset","slice","pres","presets","nonProperties","test","possiblyId","currMinWidth","valueElementOrigEvents","oninput","initValue","initAlpha","install","shift","ready","triggerNow","installByClassName","JSColor"],"mappings":"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","file":"jscolor.a25367b1.js","sourceRoot":"..","sourcesContent":["/**\r\n * jscolor - JavaScript Color Picker\r\n *\r\n * @link    http://jscolor.com\r\n * @license For open source use: GPLv3\r\n *          For commercial use: JSColor Commercial License\r\n * @author  Jan Odvarko - East Desire\r\n * @version 2.4.5\r\n *\r\n * See usage examples at http://jscolor.com/examples/\r\n */\r\n\r\n\r\n(function (global, factory) {\r\n\r\n\t'use strict';\r\n\r\n\tif (typeof module === 'object' && typeof module.exports === 'object') {\r\n\t\t// Export jscolor as a module\r\n\t\tmodule.exports = global.document ?\r\n\t\t\tfactory (global) :\r\n\t\t\tfunction (win) {\r\n\t\t\t\tif (!win.document) {\r\n\t\t\t\t\tthrow new Error('jscolor needs a window with document');\r\n\t\t\t\t}\r\n\t\t\t\treturn factory(win);\r\n\t\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Default use (no module export)\r\n\tfactory(global);\r\n\r\n})(typeof window !== 'undefined' ? window : this, function (window) { // BEGIN factory\r\n\r\n// BEGIN jscolor code\r\n\r\n\r\n'use strict';\r\n\r\n\r\nvar jscolor = (function () { // BEGIN jscolor\r\n\r\nvar jsc = {\r\n\r\n\r\n\tinitialized : false,\r\n\r\n\tinstances : [], // created instances of jscolor\r\n\r\n\treadyQueue : [], // functions waiting to be called after init\r\n\r\n\r\n\tregister : function () {\r\n\t\tif (typeof window !== 'undefined' && window.document) {\r\n\t\t\twindow.document.addEventListener('DOMContentLoaded', jsc.pub.init, false);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tinstallBySelector : function (selector, rootNode) {\r\n\t\trootNode = rootNode ? jsc.node(rootNode) : window.document;\r\n\t\tif (!rootNode) {\r\n\t\t\tthrow new Error('Missing root node');\r\n\t\t}\r\n\r\n\t\tvar elms = rootNode.querySelectorAll(selector);\r\n\r\n\t\t// for backward compatibility with DEPRECATED installation/configuration using className\r\n\t\tvar matchClass = new RegExp('(^|\\\\s)(' + jsc.pub.lookupClass + ')(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)', 'i');\r\n\r\n\t\tfor (var i = 0; i < elms.length; i += 1) {\r\n\r\n\t\t\tif (elms[i].jscolor && elms[i].jscolor instanceof jsc.pub) {\r\n\t\t\t\tcontinue; // jscolor already installed on this element\r\n\t\t\t}\r\n\r\n\t\t\tif (elms[i].type !== undefined && elms[i].type.toLowerCase() == 'color' && jsc.isColorAttrSupported) {\r\n\t\t\t\tcontinue; // skips inputs of type 'color' if supported by the browser\r\n\t\t\t}\r\n\r\n\t\t\tvar dataOpts, m;\r\n\r\n\t\t\tif (\r\n\t\t\t\t(dataOpts = jsc.getDataAttr(elms[i], 'jscolor')) !== null ||\r\n\t\t\t\t(elms[i].className && (m = elms[i].className.match(matchClass))) // installation using className (DEPRECATED)\r\n\t\t\t) {\r\n\t\t\t\tvar targetElm = elms[i];\r\n\r\n\t\t\t\tvar optsStr = '';\r\n\t\t\t\tif (dataOpts !== null) {\r\n\t\t\t\t\toptsStr = dataOpts;\r\n\r\n\t\t\t\t} else if (m) { // installation using className (DEPRECATED)\r\n\t\t\t\t\tconsole.warn('Installation using class name is DEPRECATED. Use data-jscolor=\"\" attribute instead.' + jsc.docsRef);\r\n\t\t\t\t\tif (m[4]) {\r\n\t\t\t\t\t\toptsStr = m[4];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar opts = null;\r\n\t\t\t\tif (optsStr.trim()) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\topts = jsc.parseOptionsStr(optsStr);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.warn(e + '\\n' + optsStr);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tnew jsc.pub(targetElm, opts);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tparseOptionsStr : function (str) {\r\n\t\tvar opts = null;\r\n\r\n\t\ttry {\r\n\t\t\topts = JSON.parse(str);\r\n\r\n\t\t} catch (eParse) {\r\n\t\t\tif (!jsc.pub.looseJSON) {\r\n\t\t\t\tthrow new Error('Could not parse jscolor options as JSON: ' + eParse);\r\n\t\t\t} else {\r\n\t\t\t\t// loose JSON syntax is enabled -> try to evaluate the options string as JavaScript object\r\n\t\t\t\ttry {\r\n\t\t\t\t\topts = (new Function ('var opts = (' + str + '); return typeof opts === \"object\" ? opts : {};'))();\r\n\t\t\t\t} catch (eEval) {\r\n\t\t\t\t\tthrow new Error('Could not evaluate jscolor options: ' + eEval);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn opts;\r\n\t},\r\n\r\n\r\n\tgetInstances : function () {\r\n\t\tvar inst = [];\r\n\t\tfor (var i = 0; i < jsc.instances.length; i += 1) {\r\n\t\t\t// if the targetElement still exists, the instance is considered \"alive\"\r\n\t\t\tif (jsc.instances[i] && jsc.instances[i].targetElement) {\r\n\t\t\t\tinst.push(jsc.instances[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn inst;\r\n\t},\r\n\r\n\r\n\tcreateEl : function (tagName) {\r\n\t\tvar el = window.document.createElement(tagName);\r\n\t\tjsc.setData(el, 'gui', true);\r\n\t\treturn el;\r\n\t},\r\n\r\n\r\n\tnode : function (nodeOrSelector) {\r\n\t\tif (!nodeOrSelector) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif (typeof nodeOrSelector === 'string') {\r\n\t\t\t// query selector\r\n\t\t\tvar sel = nodeOrSelector;\r\n\t\t\tvar el = null;\r\n\t\t\ttry {\r\n\t\t\t\tel = window.document.querySelector(sel);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.warn(e);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (!el) {\r\n\t\t\t\tconsole.warn('No element matches the selector: %s', sel);\r\n\t\t\t}\r\n\t\t\treturn el;\r\n\t\t}\r\n\r\n\t\tif (jsc.isNode(nodeOrSelector)) {\r\n\t\t\t// DOM node\r\n\t\t\treturn nodeOrSelector;\r\n\t\t}\r\n\r\n\t\tconsole.warn('Invalid node of type %s: %s', typeof nodeOrSelector, nodeOrSelector);\r\n\t\treturn null;\r\n\t},\r\n\r\n\r\n\t// See https://stackoverflow.com/questions/384286/\r\n\tisNode : function (val) {\r\n\t\tif (typeof Node === 'object') {\r\n\t\t\treturn val instanceof Node;\r\n\t\t}\r\n\t\treturn val && typeof val === 'object' && typeof val.nodeType === 'number' && typeof val.nodeName === 'string';\r\n\t},\r\n\r\n\r\n\tnodeName : function (node) {\r\n\t\tif (node && node.nodeName) {\r\n\t\t\treturn node.nodeName.toLowerCase();\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\r\n\tremoveChildren : function (node) {\r\n\t\twhile (node.firstChild) {\r\n\t\t\tnode.removeChild(node.firstChild);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tisTextInput : function (el) {\r\n\t\treturn el && jsc.nodeName(el) === 'input' && el.type.toLowerCase() === 'text';\r\n\t},\r\n\r\n\r\n\tisButton : function (el) {\r\n\t\tif (!el) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar n = jsc.nodeName(el);\r\n\t\treturn (\r\n\t\t\t(n === 'button') ||\r\n\t\t\t(n === 'input' && ['button', 'submit', 'reset'].indexOf(el.type.toLowerCase()) > -1)\r\n\t\t);\r\n\t},\r\n\r\n\r\n\tisButtonEmpty : function (el) {\r\n\t\tswitch (jsc.nodeName(el)) {\r\n\t\t\tcase 'input': return (!el.value || el.value.trim() === '');\r\n\t\t\tcase 'button': return (el.textContent.trim() === '');\r\n\t\t}\r\n\t\treturn null; // could not determine element's text\r\n\t},\r\n\r\n\r\n\t// See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\r\n\tisPassiveEventSupported : (function () {\r\n\t\tvar supported = false;\r\n\r\n\t\ttry {\r\n\t\t\tvar opts = Object.defineProperty({}, 'passive', {\r\n\t\t\t\tget: function () { supported = true; }\r\n\t\t\t});\r\n\t\t\twindow.addEventListener('testPassive', null, opts);\r\n\t\t\twindow.removeEventListener('testPassive', null, opts);\r\n\t\t} catch (e) {}\r\n\r\n\t\treturn supported;\r\n\t})(),\r\n\r\n\r\n\tisColorAttrSupported : (function () {\r\n\t\tvar elm = window.document.createElement('input');\r\n\t\tif (elm.setAttribute) {\r\n\t\t\telm.setAttribute('type', 'color');\r\n\t\t\tif (elm.type.toLowerCase() == 'color') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t})(),\r\n\r\n\r\n\tdataProp : '_data_jscolor',\r\n\r\n\r\n\t// usage:\r\n\t//   setData(obj, prop, value)\r\n\t//   setData(obj, {prop:value, ...})\r\n\t//\r\n\tsetData : function () {\r\n\t\tvar obj = arguments[0];\r\n\r\n\t\tif (arguments.length === 3) {\r\n\t\t\t// setting a single property\r\n\t\t\tvar data = obj.hasOwnProperty(jsc.dataProp) ? obj[jsc.dataProp] : (obj[jsc.dataProp] = {});\r\n\t\t\tvar prop = arguments[1];\r\n\t\t\tvar value = arguments[2];\r\n\r\n\t\t\tdata[prop] = value;\r\n\t\t\treturn true;\r\n\r\n\t\t} else if (arguments.length === 2 && typeof arguments[1] === 'object') {\r\n\t\t\t// setting multiple properties\r\n\t\t\tvar data = obj.hasOwnProperty(jsc.dataProp) ? obj[jsc.dataProp] : (obj[jsc.dataProp] = {});\r\n\t\t\tvar map = arguments[1];\r\n\r\n\t\t\tfor (var prop in map) {\r\n\t\t\t\tif (map.hasOwnProperty(prop)) {\r\n\t\t\t\t\tdata[prop] = map[prop];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthrow new Error('Invalid arguments');\r\n\t},\r\n\r\n\r\n\t// usage:\r\n\t//   removeData(obj, prop, [prop...])\r\n\t//\r\n\tremoveData : function () {\r\n\t\tvar obj = arguments[0];\r\n\t\tif (!obj.hasOwnProperty(jsc.dataProp)) {\r\n\t\t\treturn true; // data object does not exist\r\n\t\t}\r\n\t\tfor (var i = 1; i < arguments.length; i += 1) {\r\n\t\t\tvar prop = arguments[i];\r\n\t\t\tdelete obj[jsc.dataProp][prop];\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\tgetData : function (obj, prop, setDefault) {\r\n\t\tif (!obj.hasOwnProperty(jsc.dataProp)) {\r\n\t\t\t// data object does not exist\r\n\t\t\tif (setDefault !== undefined) {\r\n\t\t\t\tobj[jsc.dataProp] = {}; // create data object\r\n\t\t\t} else {\r\n\t\t\t\treturn undefined; // no value to return\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar data = obj[jsc.dataProp];\r\n\r\n\t\tif (!data.hasOwnProperty(prop) && setDefault !== undefined) {\r\n\t\t\tdata[prop] = setDefault;\r\n\t\t}\r\n\t\treturn data[prop];\r\n\t},\r\n\r\n\r\n\tgetDataAttr : function (el, name) {\r\n\t\tvar attrName = 'data-' + name;\r\n\t\tvar attrValue = el.getAttribute(attrName);\r\n\t\treturn attrValue;\r\n\t},\r\n\r\n\r\n\tsetDataAttr : function (el, name, value) {\r\n\t\tvar attrName = 'data-' + name;\r\n\t\tel.setAttribute(attrName, value);\r\n\t},\r\n\r\n\r\n\t_attachedGroupEvents : {},\r\n\r\n\r\n\tattachGroupEvent : function (groupName, el, evnt, func) {\r\n\t\tif (!jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\r\n\t\t\tjsc._attachedGroupEvents[groupName] = [];\r\n\t\t}\r\n\t\tjsc._attachedGroupEvents[groupName].push([el, evnt, func]);\r\n\t\tel.addEventListener(evnt, func, false);\r\n\t},\r\n\r\n\r\n\tdetachGroupEvents : function (groupName) {\r\n\t\tif (jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\r\n\t\t\tfor (var i = 0; i < jsc._attachedGroupEvents[groupName].length; i += 1) {\r\n\t\t\t\tvar evt = jsc._attachedGroupEvents[groupName][i];\r\n\t\t\t\tevt[0].removeEventListener(evt[1], evt[2], false);\r\n\t\t\t}\r\n\t\t\tdelete jsc._attachedGroupEvents[groupName];\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tpreventDefault : function (e) {\r\n\t\tif (e.preventDefault) { e.preventDefault(); }\r\n\t\te.returnValue = false;\r\n\t},\r\n\r\n\r\n\tcaptureTarget : function (target) {\r\n\t\t// IE\r\n\t\tif (target.setCapture) {\r\n\t\t\tjsc._capturedTarget = target;\r\n\t\t\tjsc._capturedTarget.setCapture();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\treleaseTarget : function () {\r\n\t\t// IE\r\n\t\tif (jsc._capturedTarget) {\r\n\t\t\tjsc._capturedTarget.releaseCapture();\r\n\t\t\tjsc._capturedTarget = null;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\ttriggerEvent : function (el, eventName, bubbles, cancelable) {\r\n\t\tif (!el) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar ev = null;\r\n\r\n\t\tif (typeof Event === 'function') {\r\n\t\t\tev = new Event(eventName, {\r\n\t\t\t\tbubbles: bubbles,\r\n\t\t\t\tcancelable: cancelable\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// IE\r\n\t\t\tev = window.document.createEvent('Event');\r\n\t\t\tev.initEvent(eventName, bubbles, cancelable);\r\n\t\t}\r\n\r\n\t\tif (!ev) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// so that we know that the event was triggered internally\r\n\t\tjsc.setData(ev, 'internal', true);\r\n\r\n\t\tel.dispatchEvent(ev);\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\ttriggerInputEvent : function (el, eventName, bubbles, cancelable) {\r\n\t\tif (!el) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (jsc.isTextInput(el)) {\r\n\t\t\tjsc.triggerEvent(el, eventName, bubbles, cancelable);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\teventKey : function (ev) {\r\n\t\tvar keys = {\r\n\t\t\t9: 'Tab',\r\n\t\t\t13: 'Enter',\r\n\t\t\t27: 'Escape',\r\n\t\t};\r\n\t\tif (typeof ev.code === 'string') {\r\n\t\t\treturn ev.code;\r\n\t\t} else if (ev.keyCode !== undefined && keys.hasOwnProperty(ev.keyCode)) {\r\n\t\t\treturn keys[ev.keyCode];\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\r\n\tstrList : function (str) {\r\n\t\tif (!str) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\treturn str.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\r\n\t},\r\n\r\n\r\n\t// The className parameter (str) can only contain a single class name\r\n\thasClass : function (elm, className) {\r\n\t\tif (!className) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (elm.classList !== undefined) {\r\n\t\t\treturn elm.classList.contains(className);\r\n\t\t}\r\n\t\t// polyfill\r\n\t\treturn -1 != (' ' + elm.className.replace(/\\s+/g, ' ') + ' ').indexOf(' ' + className + ' ');\r\n\t},\r\n\r\n\r\n\t// The className parameter (str) can contain multiple class names separated by whitespace\r\n\taddClass : function (elm, className) {\r\n\t\tvar classNames = jsc.strList(className);\r\n\r\n\t\tif (elm.classList !== undefined) {\r\n\t\t\tfor (var i = 0; i < classNames.length; i += 1) {\r\n\t\t\t\telm.classList.add(classNames[i]);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// polyfill\r\n\t\tfor (var i = 0; i < classNames.length; i += 1) {\r\n\t\t\tif (!jsc.hasClass(elm, classNames[i])) {\r\n\t\t\t\telm.className += (elm.className ? ' ' : '') + classNames[i];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// The className parameter (str) can contain multiple class names separated by whitespace\r\n\tremoveClass : function (elm, className) {\r\n\t\tvar classNames = jsc.strList(className);\r\n\r\n\t\tif (elm.classList !== undefined) {\r\n\t\t\tfor (var i = 0; i < classNames.length; i += 1) {\r\n\t\t\t\telm.classList.remove(classNames[i]);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// polyfill\r\n\t\tfor (var i = 0; i < classNames.length; i += 1) {\r\n\t\t\tvar repl = new RegExp(\r\n\t\t\t\t'^\\\\s*' + classNames[i] + '\\\\s*|' +\r\n\t\t\t\t'\\\\s*' + classNames[i] + '\\\\s*$|' +\r\n\t\t\t\t'\\\\s+' + classNames[i] + '(\\\\s+)',\r\n\t\t\t\t'g'\r\n\t\t\t);\r\n\t\t\telm.className = elm.className.replace(repl, '$1');\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tgetCompStyle : function (elm) {\r\n\t\tvar compStyle = window.getComputedStyle ? window.getComputedStyle(elm) : elm.currentStyle;\r\n\r\n\t\t// Note: In Firefox, getComputedStyle returns null in a hidden iframe,\r\n\t\t// that's why we need to check if the returned value is non-empty\r\n\t\tif (!compStyle) {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t\treturn compStyle;\r\n\t},\r\n\r\n\r\n\t// Note:\r\n\t//   Setting a property to NULL reverts it to the state before it was first set\r\n\t//   with the 'reversible' flag enabled\r\n\t//\r\n\tsetStyle : function (elm, styles, important, reversible) {\r\n\t\t// using '' for standard priority (IE10 apparently doesn't like value undefined)\r\n\t\tvar priority = important ? 'important' : '';\r\n\t\tvar origStyle = null;\r\n\r\n\t\tfor (var prop in styles) {\r\n\t\t\tif (styles.hasOwnProperty(prop)) {\r\n\t\t\t\tvar setVal = null;\r\n\r\n\t\t\t\tif (styles[prop] === null) {\r\n\t\t\t\t\t// reverting a property value\r\n\r\n\t\t\t\t\tif (!origStyle) {\r\n\t\t\t\t\t\t// get the original style object, but dont't try to create it if it doesn't exist\r\n\t\t\t\t\t\torigStyle = jsc.getData(elm, 'origStyle');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (origStyle && origStyle.hasOwnProperty(prop)) {\r\n\t\t\t\t\t\t// we have property's original value -> use it\r\n\t\t\t\t\t\tsetVal = origStyle[prop];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// setting a property value\r\n\r\n\t\t\t\t\tif (reversible) {\r\n\t\t\t\t\t\tif (!origStyle) {\r\n\t\t\t\t\t\t\t// get the original style object and if it doesn't exist, create it\r\n\t\t\t\t\t\t\torigStyle = jsc.getData(elm, 'origStyle', {});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!origStyle.hasOwnProperty(prop)) {\r\n\t\t\t\t\t\t\t// original property value not yet stored -> store it\r\n\t\t\t\t\t\t\torigStyle[prop] = elm.style[prop];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetVal = styles[prop];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (setVal !== null) {\r\n\t\t\t\t\telm.style.setProperty(prop, setVal, priority);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\thexColor : function (r, g, b) {\r\n\t\treturn '#' + (\r\n\t\t\t('0' + Math.round(r).toString(16)).substr(-2) +\r\n\t\t\t('0' + Math.round(g).toString(16)).substr(-2) +\r\n\t\t\t('0' + Math.round(b).toString(16)).substr(-2)\r\n\t\t).toUpperCase();\r\n\t},\r\n\r\n\r\n\thexaColor : function (r, g, b, a) {\r\n\t\treturn '#' + (\r\n\t\t\t('0' + Math.round(r).toString(16)).substr(-2) +\r\n\t\t\t('0' + Math.round(g).toString(16)).substr(-2) +\r\n\t\t\t('0' + Math.round(b).toString(16)).substr(-2) +\r\n\t\t\t('0' + Math.round(a * 255).toString(16)).substr(-2)\r\n\t\t).toUpperCase();\r\n\t},\r\n\r\n\r\n\trgbColor : function (r, g, b) {\r\n\t\treturn 'rgb(' +\r\n\t\t\tMath.round(r) + ',' +\r\n\t\t\tMath.round(g) + ',' +\r\n\t\t\tMath.round(b) +\r\n\t\t')';\r\n\t},\r\n\r\n\r\n\trgbaColor : function (r, g, b, a) {\r\n\t\treturn 'rgba(' +\r\n\t\t\tMath.round(r) + ',' +\r\n\t\t\tMath.round(g) + ',' +\r\n\t\t\tMath.round(b) + ',' +\r\n\t\t\t(Math.round((a===undefined || a===null ? 1 : a) * 100) / 100) +\r\n\t\t')';\r\n\t},\r\n\r\n\r\n\tlinearGradient : (function () {\r\n\r\n\t\tfunction getFuncName () {\r\n\t\t\tvar stdName = 'linear-gradient';\r\n\t\t\tvar prefixes = ['', '-webkit-', '-moz-', '-o-', '-ms-'];\r\n\t\t\tvar helper = window.document.createElement('div');\r\n\r\n\t\t\tfor (var i = 0; i < prefixes.length; i += 1) {\r\n\t\t\t\tvar tryFunc = prefixes[i] + stdName;\r\n\t\t\t\tvar tryVal = tryFunc + '(to right, rgba(0,0,0,0), rgba(0,0,0,0))';\r\n\r\n\t\t\t\thelper.style.background = tryVal;\r\n\t\t\t\tif (helper.style.background) { // CSS background successfully set -> function name is supported\r\n\t\t\t\t\treturn tryFunc;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn stdName; // fallback to standard 'linear-gradient' without vendor prefix\r\n\t\t}\r\n\r\n\t\tvar funcName = getFuncName();\r\n\r\n\t\treturn function () {\r\n\t\t\treturn funcName + '(' + Array.prototype.join.call(arguments, ', ') + ')';\r\n\t\t};\r\n\r\n\t})(),\r\n\r\n\r\n\tsetBorderRadius : function (elm, value) {\r\n\t\tjsc.setStyle(elm, {'border-radius' : value || '0'});\r\n\t},\r\n\r\n\r\n\tsetBoxShadow : function (elm, value) {\r\n\t\tjsc.setStyle(elm, {'box-shadow': value || 'none'});\r\n\t},\r\n\r\n\r\n\tgetElementPos : function (e, relativeToViewport) {\r\n\t\tvar x=0, y=0;\r\n\t\tvar rect = e.getBoundingClientRect();\r\n\t\tx = rect.left;\r\n\t\ty = rect.top;\r\n\t\tif (!relativeToViewport) {\r\n\t\t\tvar viewPos = jsc.getViewPos();\r\n\t\t\tx += viewPos[0];\r\n\t\t\ty += viewPos[1];\r\n\t\t}\r\n\t\treturn [x, y];\r\n\t},\r\n\r\n\r\n\tgetElementSize : function (e) {\r\n\t\treturn [e.offsetWidth, e.offsetHeight];\r\n\t},\r\n\r\n\r\n\t// get pointer's X/Y coordinates relative to viewport\r\n\tgetAbsPointerPos : function (e) {\r\n\t\tvar x = 0, y = 0;\r\n\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\r\n\t\t\t// touch devices\r\n\t\t\tx = e.changedTouches[0].clientX;\r\n\t\t\ty = e.changedTouches[0].clientY;\r\n\t\t} else if (typeof e.clientX === 'number') {\r\n\t\t\tx = e.clientX;\r\n\t\t\ty = e.clientY;\r\n\t\t}\r\n\t\treturn { x: x, y: y };\r\n\t},\r\n\r\n\r\n\t// get pointer's X/Y coordinates relative to target element\r\n\tgetRelPointerPos : function (e) {\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tvar targetRect = target.getBoundingClientRect();\r\n\r\n\t\tvar x = 0, y = 0;\r\n\r\n\t\tvar clientX = 0, clientY = 0;\r\n\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\r\n\t\t\t// touch devices\r\n\t\t\tclientX = e.changedTouches[0].clientX;\r\n\t\t\tclientY = e.changedTouches[0].clientY;\r\n\t\t} else if (typeof e.clientX === 'number') {\r\n\t\t\tclientX = e.clientX;\r\n\t\t\tclientY = e.clientY;\r\n\t\t}\r\n\r\n\t\tx = clientX - targetRect.left;\r\n\t\ty = clientY - targetRect.top;\r\n\t\treturn { x: x, y: y };\r\n\t},\r\n\r\n\r\n\tgetViewPos : function () {\r\n\t\tvar doc = window.document.documentElement;\r\n\t\treturn [\r\n\t\t\t(window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0),\r\n\t\t\t(window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\r\n\t\t];\r\n\t},\r\n\r\n\r\n\tgetViewSize : function () {\r\n\t\tvar doc = window.document.documentElement;\r\n\t\treturn [\r\n\t\t\t(window.innerWidth || doc.clientWidth),\r\n\t\t\t(window.innerHeight || doc.clientHeight),\r\n\t\t];\r\n\t},\r\n\r\n\r\n\t// r: 0-255\r\n\t// g: 0-255\r\n\t// b: 0-255\r\n\t//\r\n\t// returns: [ 0-360, 0-100, 0-100 ]\r\n\t//\r\n\tRGB_HSV : function (r, g, b) {\r\n\t\tr /= 255;\r\n\t\tg /= 255;\r\n\t\tb /= 255;\r\n\t\tvar n = Math.min(Math.min(r,g),b);\r\n\t\tvar v = Math.max(Math.max(r,g),b);\r\n\t\tvar m = v - n;\r\n\t\tif (m === 0) { return [ null, 0, 100 * v ]; }\r\n\t\tvar h = r===n ? 3+(b-g)/m : (g===n ? 5+(r-b)/m : 1+(g-r)/m);\r\n\t\treturn [\r\n\t\t\t60 * (h===6?0:h),\r\n\t\t\t100 * (m/v),\r\n\t\t\t100 * v\r\n\t\t];\r\n\t},\r\n\r\n\r\n\t// h: 0-360\r\n\t// s: 0-100\r\n\t// v: 0-100\r\n\t//\r\n\t// returns: [ 0-255, 0-255, 0-255 ]\r\n\t//\r\n\tHSV_RGB : function (h, s, v) {\r\n\t\tvar u = 255 * (v / 100);\r\n\r\n\t\tif (h === null) {\r\n\t\t\treturn [ u, u, u ];\r\n\t\t}\r\n\r\n\t\th /= 60;\r\n\t\ts /= 100;\r\n\r\n\t\tvar i = Math.floor(h);\r\n\t\tvar f = i%2 ? h-i : 1-(h-i);\r\n\t\tvar m = u * (1 - s);\r\n\t\tvar n = u * (1 - s * f);\r\n\t\tswitch (i) {\r\n\t\t\tcase 6:\r\n\t\t\tcase 0: return [u,n,m];\r\n\t\t\tcase 1: return [n,u,m];\r\n\t\t\tcase 2: return [m,u,n];\r\n\t\t\tcase 3: return [m,n,u];\r\n\t\t\tcase 4: return [n,m,u];\r\n\t\t\tcase 5: return [u,m,n];\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tparseColorString : function (str) {\r\n\t\tvar ret = {\r\n\t\t\trgba: null,\r\n\t\t\tformat: null // 'hex' | 'hexa' | 'rgb' | 'rgba'\r\n\t\t};\r\n\r\n\t\tvar m;\r\n\r\n\t\tif (m = str.match(/^\\W*([0-9A-F]{3,8})\\W*$/i)) {\r\n\t\t\t// HEX notation\r\n\r\n\t\t\tif (m[1].length === 8) {\r\n\t\t\t\t// 8-char notation (= with alpha)\r\n\t\t\t\tret.format = 'hexa';\r\n\t\t\t\tret.rgba = [\r\n\t\t\t\t\tparseInt(m[1].substr(0,2),16),\r\n\t\t\t\t\tparseInt(m[1].substr(2,2),16),\r\n\t\t\t\t\tparseInt(m[1].substr(4,2),16),\r\n\t\t\t\t\tparseInt(m[1].substr(6,2),16) / 255\r\n\t\t\t\t];\r\n\r\n\t\t\t} else if (m[1].length === 6) {\r\n\t\t\t\t// 6-char notation\r\n\t\t\t\tret.format = 'hex';\r\n\t\t\t\tret.rgba = [\r\n\t\t\t\t\tparseInt(m[1].substr(0,2),16),\r\n\t\t\t\t\tparseInt(m[1].substr(2,2),16),\r\n\t\t\t\t\tparseInt(m[1].substr(4,2),16),\r\n\t\t\t\t\tnull\r\n\t\t\t\t];\r\n\r\n\t\t\t} else if (m[1].length === 3) {\r\n\t\t\t\t// 3-char notation\r\n\t\t\t\tret.format = 'hex';\r\n\t\t\t\tret.rgba = [\r\n\t\t\t\t\tparseInt(m[1].charAt(0) + m[1].charAt(0),16),\r\n\t\t\t\t\tparseInt(m[1].charAt(1) + m[1].charAt(1),16),\r\n\t\t\t\t\tparseInt(m[1].charAt(2) + m[1].charAt(2),16),\r\n\t\t\t\t\tnull\r\n\t\t\t\t];\r\n\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn ret;\r\n\t\t}\r\n\r\n\t\tif (m = str.match(/^\\W*rgba?\\(([^)]*)\\)\\W*$/i)) {\r\n\t\t\t// rgb(...) or rgba(...) notation\r\n\r\n\t\t\tvar par = m[1].split(',');\r\n\t\t\tvar re = /^\\s*(\\d+|\\d*\\.\\d+|\\d+\\.\\d*)\\s*$/;\r\n\t\t\tvar mR, mG, mB, mA;\r\n\t\t\tif (\r\n\t\t\t\tpar.length >= 3 &&\r\n\t\t\t\t(mR = par[0].match(re)) &&\r\n\t\t\t\t(mG = par[1].match(re)) &&\r\n\t\t\t\t(mB = par[2].match(re))\r\n\t\t\t) {\r\n\t\t\t\tret.format = 'rgb';\r\n\t\t\t\tret.rgba = [\r\n\t\t\t\t\tparseFloat(mR[1]) || 0,\r\n\t\t\t\t\tparseFloat(mG[1]) || 0,\r\n\t\t\t\t\tparseFloat(mB[1]) || 0,\r\n\t\t\t\t\tnull\r\n\t\t\t\t];\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tpar.length >= 4 &&\r\n\t\t\t\t\t(mA = par[3].match(re))\r\n\t\t\t\t) {\r\n\t\t\t\t\tret.format = 'rgba';\r\n\t\t\t\t\tret.rgba[3] = parseFloat(mA[1]) || 0;\r\n\t\t\t\t}\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\r\n\tparsePaletteValue : function (mixed) {\r\n\t\tvar vals = [];\r\n\r\n\t\tif (typeof mixed === 'string') { // input is a string of space separated color values\r\n\t\t\t// rgb() and rgba() may contain spaces too, so let's find all color values by regex\r\n\t\t\tmixed.replace(/#[0-9A-F]{3}([0-9A-F]{3})?|rgba?\\(([^)]*)\\)/ig, function (val) {\r\n\t\t\t\tvals.push(val);\r\n\t\t\t});\r\n\t\t} else if (Array.isArray(mixed)) { // input is an array of color values\r\n\t\t\tvals = mixed;\r\n\t\t}\r\n\r\n\t\t// convert all values into uniform color format\r\n\r\n\t\tvar colors = [];\r\n\r\n\t\tfor (var i = 0; i < vals.length; i++) {\r\n\t\t\tvar color = jsc.parseColorString(vals[i]);\r\n\t\t\tif (color) {\r\n\t\t\t\tcolors.push(color);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn colors;\r\n\t},\r\n\r\n\r\n\tcontainsTranparentColor : function (colors) {\r\n\t\tfor (var i = 0; i < colors.length; i++) {\r\n\t\t\tvar a = colors[i].rgba[3];\r\n\t\t\tif (a !== null && a < 1.0) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\r\n\tisAlphaFormat : function (format) {\r\n\t\tswitch (format.toLowerCase()) {\r\n\t\tcase 'hexa':\r\n\t\tcase 'rgba':\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\r\n\t// Canvas scaling for retina displays\r\n\t//\r\n\t// adapted from https://www.html5rocks.com/en/tutorials/canvas/hidpi/\r\n\t//\r\n\tscaleCanvasForHighDPR : function (canvas) {\r\n\t\tvar dpr = window.devicePixelRatio || 1;\r\n\t\tcanvas.width *= dpr;\r\n\t\tcanvas.height *= dpr;\r\n\t\tvar ctx = canvas.getContext('2d');\r\n\t\tctx.scale(dpr, dpr);\r\n\t},\r\n\r\n\r\n\tgenColorPreviewCanvas : function (color, separatorPos, specWidth, scaleForHighDPR) {\r\n\r\n\t\tvar sepW = Math.round(jsc.pub.previewSeparator.length);\r\n\t\tvar sqSize = jsc.pub.chessboardSize;\r\n\t\tvar sqColor1 = jsc.pub.chessboardColor1;\r\n\t\tvar sqColor2 = jsc.pub.chessboardColor2;\r\n\r\n\t\tvar cWidth = specWidth ? specWidth : sqSize * 2;\r\n\t\tvar cHeight = sqSize * 2;\r\n\r\n\t\tvar canvas = jsc.createEl('canvas');\r\n\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\tcanvas.width = cWidth;\r\n\t\tcanvas.height = cHeight;\r\n\t\tif (scaleForHighDPR) {\r\n\t\t\tjsc.scaleCanvasForHighDPR(canvas);\r\n\t\t}\r\n\r\n\t\t// transparency chessboard - background\r\n\t\tctx.fillStyle = sqColor1;\r\n\t\tctx.fillRect(0, 0, cWidth, cHeight);\r\n\r\n\t\t// transparency chessboard - squares\r\n\t\tctx.fillStyle = sqColor2;\r\n\t\tfor (var x = 0; x < cWidth; x += sqSize * 2) {\r\n\t\t\tctx.fillRect(x, 0, sqSize, sqSize);\r\n\t\t\tctx.fillRect(x + sqSize, sqSize, sqSize, sqSize);\r\n\t\t}\r\n\r\n\t\tif (color) {\r\n\t\t\t// actual color in foreground\r\n\t\t\tctx.fillStyle = color;\r\n\t\t\tctx.fillRect(0, 0, cWidth, cHeight);\r\n\t\t}\r\n\r\n\t\tvar start = null;\r\n\t\tswitch (separatorPos) {\r\n\t\t\tcase 'left':\r\n\t\t\t\tstart = 0;\r\n\t\t\t\tctx.clearRect(0, 0, sepW/2, cHeight);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\tstart = cWidth - sepW;\r\n\t\t\t\tctx.clearRect(cWidth - (sepW/2), 0, sepW/2, cHeight);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tif (start !== null) {\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tfor (var i = 0; i < jsc.pub.previewSeparator.length; i += 1) {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.strokeStyle = jsc.pub.previewSeparator[i];\r\n\t\t\t\tctx.moveTo(0.5 + start + i, 0);\r\n\t\t\t\tctx.lineTo(0.5 + start + i, cHeight);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tcanvas: canvas,\r\n\t\t\twidth: cWidth,\r\n\t\t\theight: cHeight,\r\n\t\t};\r\n\t},\r\n\r\n\r\n\t// if position or width is not set => fill the entire element (0%-100%)\r\n\tgenColorPreviewGradient : function (color, position, width) {\r\n\t\tvar params = [];\r\n\r\n\t\tif (position && width) {\r\n\t\t\tparams = [\r\n\t\t\t\t'to ' + {'left':'right', 'right':'left'}[position],\r\n\t\t\t\tcolor + ' 0%',\r\n\t\t\t\tcolor + ' ' + width + 'px',\r\n\t\t\t\t'rgba(0,0,0,0) ' + (width + 1) + 'px',\r\n\t\t\t\t'rgba(0,0,0,0) 100%',\r\n\t\t\t];\r\n\t\t} else {\r\n\t\t\tparams = [\r\n\t\t\t\t'to right',\r\n\t\t\t\tcolor + ' 0%',\r\n\t\t\t\tcolor + ' 100%',\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\treturn jsc.linearGradient.apply(this, params);\r\n\t},\r\n\r\n\r\n\tredrawPosition : function () {\r\n\r\n\t\tif (!jsc.picker || !jsc.picker.owner) {\r\n\t\t\treturn; // picker is not shown\r\n\t\t}\r\n\r\n\t\tvar thisObj = jsc.picker.owner;\r\n\r\n\t\tvar tp, vp;\r\n\r\n\t\tif (thisObj.fixed) {\r\n\t\t\t// Fixed elements are positioned relative to viewport,\r\n\t\t\t// therefore we can ignore the scroll offset\r\n\t\t\ttp = jsc.getElementPos(thisObj.targetElement, true); // target pos\r\n\t\t\tvp = [0, 0]; // view pos\r\n\t\t} else {\r\n\t\t\ttp = jsc.getElementPos(thisObj.targetElement); // target pos\r\n\t\t\tvp = jsc.getViewPos(); // view pos\r\n\t\t}\r\n\r\n\t\tvar ts = jsc.getElementSize(thisObj.targetElement); // target size\r\n\t\tvar vs = jsc.getViewSize(); // view size\r\n\t\tvar pd = jsc.getPickerDims(thisObj);\r\n\t\tvar ps = [pd.borderW, pd.borderH]; // picker outer size\r\n\t\tvar a, b, c;\r\n\t\tswitch (thisObj.position.toLowerCase()) {\r\n\t\t\tcase 'left': a=1; b=0; c=-1; break;\r\n\t\t\tcase 'right':a=1; b=0; c=1; break;\r\n\t\t\tcase 'top':  a=0; b=1; c=-1; break;\r\n\t\t\tdefault:     a=0; b=1; c=1; break;\r\n\t\t}\r\n\t\tvar l = (ts[b]+ps[b])/2;\r\n\r\n\t\t// compute picker position\r\n\t\tif (!thisObj.smartPosition) {\r\n\t\t\tvar pp = [\r\n\t\t\t\ttp[a],\r\n\t\t\t\ttp[b]+ts[b]-l+l*c\r\n\t\t\t];\r\n\t\t} else {\r\n\t\t\tvar pp = [\r\n\t\t\t\t-vp[a]+tp[a]+ps[a] > vs[a] ?\r\n\t\t\t\t\t(-vp[a]+tp[a]+ts[a]/2 > vs[a]/2 && tp[a]+ts[a]-ps[a] >= 0 ? tp[a]+ts[a]-ps[a] : tp[a]) :\r\n\t\t\t\t\ttp[a],\r\n\t\t\t\t-vp[b]+tp[b]+ts[b]+ps[b]-l+l*c > vs[b] ?\r\n\t\t\t\t\t(-vp[b]+tp[b]+ts[b]/2 > vs[b]/2 && tp[b]+ts[b]-l-l*c >= 0 ? tp[b]+ts[b]-l-l*c : tp[b]+ts[b]-l+l*c) :\r\n\t\t\t\t\t(tp[b]+ts[b]-l+l*c >= 0 ? tp[b]+ts[b]-l+l*c : tp[b]+ts[b]-l-l*c)\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\tvar x = pp[a];\r\n\t\tvar y = pp[b];\r\n\t\tvar positionValue = thisObj.fixed ? 'fixed' : 'absolute';\r\n\t\tvar contractShadow =\r\n\t\t\t(pp[0] + ps[0] > tp[0] || pp[0] < tp[0] + ts[0]) &&\r\n\t\t\t(pp[1] + ps[1] < tp[1] + ts[1]);\r\n\r\n\t\tjsc._drawPosition(thisObj, x, y, positionValue, contractShadow);\r\n\t},\r\n\r\n\r\n\t_drawPosition : function (thisObj, x, y, positionValue, contractShadow) {\r\n\t\tvar vShadow = contractShadow ? 0 : thisObj.shadowBlur; // px\r\n\r\n\t\tjsc.picker.wrap.style.position = positionValue;\r\n\t\tjsc.picker.wrap.style.left = x + 'px';\r\n\t\tjsc.picker.wrap.style.top = y + 'px';\r\n\r\n\t\tjsc.setBoxShadow(\r\n\t\t\tjsc.picker.boxS,\r\n\t\t\tthisObj.shadow ?\r\n\t\t\t\tnew jsc.BoxShadow(0, vShadow, thisObj.shadowBlur, 0, thisObj.shadowColor) :\r\n\t\t\t\tnull);\r\n\t},\r\n\r\n\r\n\tgetPickerDims : function (thisObj) {\r\n\t\tvar w = 2 * thisObj.controlBorderWidth + thisObj.width;\r\n\t\tvar h = 2 * thisObj.controlBorderWidth + thisObj.height;\r\n\r\n\t\tvar sliderSpace = 2 * thisObj.controlBorderWidth + 2 * jsc.getControlPadding(thisObj) + thisObj.sliderSize;\r\n\r\n\t\tif (jsc.getSliderChannel(thisObj)) {\r\n\t\t\tw += sliderSpace;\r\n\t\t}\r\n\t\tif (thisObj.hasAlphaChannel()) {\r\n\t\t\tw += sliderSpace;\r\n\t\t}\r\n\r\n\t\tvar pal = jsc.getPaletteDims(thisObj, w);\r\n\r\n\t\tif (pal.height) {\r\n\t\t\th += pal.height + thisObj.padding;\r\n\t\t}\r\n\t\tif (thisObj.closeButton) {\r\n\t\t\th += 2 * thisObj.controlBorderWidth + thisObj.padding + thisObj.buttonHeight;\r\n\t\t}\r\n\r\n\t\tvar pW = w + (2 * thisObj.padding);\r\n\t\tvar pH = h + (2 * thisObj.padding);\r\n\r\n\t\treturn {\r\n\t\t\tcontentW: w,\r\n\t\t\tcontentH: h,\r\n\t\t\tpaddedW: pW,\r\n\t\t\tpaddedH: pH,\r\n\t\t\tborderW: pW + (2 * thisObj.borderWidth),\r\n\t\t\tborderH: pH + (2 * thisObj.borderWidth),\r\n\t\t\tpalette: pal,\r\n\t\t};\r\n\t},\r\n\r\n\r\n\tgetPaletteDims : function (thisObj, width) {\r\n\t\tvar cols = 0, rows = 0, cellW = 0, cellH = 0, height = 0;\r\n\t\tvar sampleCount = thisObj._palette ? thisObj._palette.length : 0;\r\n\r\n\t\tif (sampleCount) {\r\n\t\t\tcols = thisObj.paletteCols;\r\n\t\t\trows = cols > 0 ? Math.ceil(sampleCount / cols) : 0;\r\n\r\n\t\t\t// color sample's dimensions (includes border)\r\n\t\t\tcellW = Math.max(1, Math.floor((width - ((cols - 1) * thisObj.paletteSpacing)) / cols));\r\n\t\t\tcellH = thisObj.paletteHeight ? Math.min(thisObj.paletteHeight, cellW) : cellW;\r\n\t\t}\r\n\r\n\t\tif (rows) {\r\n\t\t\theight =\r\n\t\t\t\trows * cellH +\r\n\t\t\t\t(rows - 1) * thisObj.paletteSpacing;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tcols: cols,\r\n\t\t\trows: rows,\r\n\t\t\tcellW: cellW,\r\n\t\t\tcellH: cellH,\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t};\r\n\t},\r\n\r\n\r\n\tgetControlPadding : function (thisObj) {\r\n\t\treturn Math.max(\r\n\t\t\tthisObj.padding / 2,\r\n\t\t\t(2 * thisObj.pointerBorderWidth + thisObj.pointerThickness) - thisObj.controlBorderWidth\r\n\t\t);\r\n\t},\r\n\r\n\r\n\tgetPadYChannel : function (thisObj) {\r\n\t\tswitch (thisObj.mode.charAt(1).toLowerCase()) {\r\n\t\t\tcase 'v': return 'v'; break;\r\n\t\t}\r\n\t\treturn 's';\r\n\t},\r\n\r\n\r\n\tgetSliderChannel : function (thisObj) {\r\n\t\tif (thisObj.mode.length > 2) {\r\n\t\t\tswitch (thisObj.mode.charAt(2).toLowerCase()) {\r\n\t\t\t\tcase 's': return 's'; break;\r\n\t\t\t\tcase 'v': return 'v'; break;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\r\n\t// calls function specified in picker's property\r\n\ttriggerCallback : function (thisObj, prop) {\r\n\t\tif (!thisObj[prop]) {\r\n\t\t\treturn; // callback func not specified\r\n\t\t}\r\n\t\tvar callback = null;\r\n\r\n\t\tif (typeof thisObj[prop] === 'string') {\r\n\t\t\t// string with code\r\n\t\t\ttry {\r\n\t\t\t\tcallback = new Function (thisObj[prop]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// function\r\n\t\t\tcallback = thisObj[prop];\r\n\t\t}\r\n\r\n\t\tif (callback) {\r\n\t\t\tcallback.call(thisObj);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Triggers a color change related event(s) on all picker instances.\r\n\t// It is possible to specify multiple events separated with a space.\r\n\ttriggerGlobal : function (eventNames) {\r\n\t\tvar inst = jsc.getInstances();\r\n\t\tfor (var i = 0; i < inst.length; i += 1) {\r\n\t\t\tinst[i].trigger(eventNames);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_pointerMoveEvent : {\r\n\t\tmouse: 'mousemove',\r\n\t\ttouch: 'touchmove'\r\n\t},\r\n\t_pointerEndEvent : {\r\n\t\tmouse: 'mouseup',\r\n\t\ttouch: 'touchend'\r\n\t},\r\n\r\n\r\n\t_pointerOrigin : null,\r\n\t_capturedTarget : null,\r\n\r\n\r\n\tonDocumentKeyUp : function (e) {\r\n\t\tif (['Tab', 'Escape'].indexOf(jsc.eventKey(e)) !== -1) {\r\n\t\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\t\tjsc.picker.owner.tryHide();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonWindowResize : function (e) {\r\n\t\tjsc.redrawPosition();\r\n\t},\r\n\r\n\r\n\tonWindowScroll : function (e) {\r\n\t\tjsc.redrawPosition();\r\n\t},\r\n\r\n\r\n\tonParentScroll : function (e) {\r\n\t\t// hide the picker when one of the parent elements is scrolled\r\n\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\tjsc.picker.owner.tryHide();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonDocumentMouseDown : function (e) {\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif (target.jscolor && target.jscolor instanceof jsc.pub) { // clicked targetElement -> show picker\r\n\t\t\tif (target.jscolor.showOnClick && !target.disabled) {\r\n\t\t\t\ttarget.jscolor.show();\r\n\t\t\t}\r\n\t\t} else if (jsc.getData(target, 'gui')) { // clicked jscolor's GUI element\r\n\t\t\tvar control = jsc.getData(target, 'control');\r\n\t\t\tif (control) {\r\n\t\t\t\t// jscolor's control\r\n\t\t\t\tjsc.onControlPointerStart(e, target, jsc.getData(target, 'control'), 'mouse');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// mouse is outside the picker's controls -> hide the color picker!\r\n\t\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\t\tjsc.picker.owner.tryHide();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonPickerTouchStart : function (e) {\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif (jsc.getData(target, 'control')) {\r\n\t\t\tjsc.onControlPointerStart(e, target, jsc.getData(target, 'control'), 'touch');\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonControlPointerStart : function (e, target, controlName, pointerType) {\r\n\t\tvar thisObj = jsc.getData(target, 'instance');\r\n\r\n\t\tjsc.preventDefault(e);\r\n\t\tjsc.captureTarget(target);\r\n\r\n\t\tvar registerDragEvents = function (doc, offset) {\r\n\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerMoveEvent[pointerType],\r\n\t\t\t\tjsc.onDocumentPointerMove(e, target, controlName, pointerType, offset));\r\n\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerEndEvent[pointerType],\r\n\t\t\t\tjsc.onDocumentPointerEnd(e, target, controlName, pointerType));\r\n\t\t};\r\n\r\n\t\tregisterDragEvents(window.document, [0, 0]);\r\n\r\n\t\tif (window.parent && window.frameElement) {\r\n\t\t\tvar rect = window.frameElement.getBoundingClientRect();\r\n\t\t\tvar ofs = [-rect.left, -rect.top];\r\n\t\t\tregisterDragEvents(window.parent.window.document, ofs);\r\n\t\t}\r\n\r\n\t\tvar abs = jsc.getAbsPointerPos(e);\r\n\t\tvar rel = jsc.getRelPointerPos(e);\r\n\t\tjsc._pointerOrigin = {\r\n\t\t\tx: abs.x - rel.x,\r\n\t\t\ty: abs.y - rel.y\r\n\t\t};\r\n\r\n\t\tswitch (controlName) {\r\n\t\tcase 'pad':\r\n\t\t\t// if the value slider is at the bottom, move it up\r\n\t\t\tif (jsc.getSliderChannel(thisObj) === 'v' && thisObj.channels.v === 0) {\r\n\t\t\t\tthisObj.fromHSVA(null, null, 100, null);\r\n\t\t\t}\r\n\t\t\tjsc.setPad(thisObj, e, 0, 0);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'sld':\r\n\t\t\tjsc.setSld(thisObj, e, 0);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'asld':\r\n\t\t\tjsc.setASld(thisObj, e, 0);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tthisObj.trigger('input');\r\n\t},\r\n\r\n\r\n\tonDocumentPointerMove : function (e, target, controlName, pointerType, offset) {\r\n\t\treturn function (e) {\r\n\t\t\tvar thisObj = jsc.getData(target, 'instance');\r\n\t\t\tswitch (controlName) {\r\n\t\t\tcase 'pad':\r\n\t\t\t\tjsc.setPad(thisObj, e, offset[0], offset[1]);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'sld':\r\n\t\t\t\tjsc.setSld(thisObj, e, offset[1]);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'asld':\r\n\t\t\t\tjsc.setASld(thisObj, e, offset[1]);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthisObj.trigger('input');\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonDocumentPointerEnd : function (e, target, controlName, pointerType) {\r\n\t\treturn function (e) {\r\n\t\t\tvar thisObj = jsc.getData(target, 'instance');\r\n\t\t\tjsc.detachGroupEvents('drag');\r\n\t\t\tjsc.releaseTarget();\r\n\r\n\t\t\t// Always trigger changes AFTER detaching outstanding mouse handlers,\r\n\t\t\t// in case some color change that occured in user-defined onChange/onInput handler\r\n\t\t\t// intruded into current mouse events\r\n\t\t\tthisObj.trigger('input');\r\n\t\t\tthisObj.trigger('change');\r\n\t\t};\r\n\t},\r\n\r\n\r\n\tonPaletteSampleClick : function (e) {\r\n\t\tvar target = e.currentTarget;\r\n\t\tvar thisObj = jsc.getData(target, 'instance');\r\n\t\tvar color = jsc.getData(target, 'color');\r\n\r\n\t\t// when format is flexible, use the original format of this color sample\r\n\t\tif (thisObj.format.toLowerCase() === 'any') {\r\n\t\t\tthisObj._setFormat(color.format); // adapt format\r\n\t\t\tif (!jsc.isAlphaFormat(thisObj.getFormat())) {\r\n\t\t\t\tcolor.rgba[3] = 1.0; // when switching to a format that doesn't support alpha, set full opacity\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// if this color doesn't specify alpha, use alpha of 1.0 (if applicable)\r\n\t\tif (color.rgba[3] === null) {\r\n\t\t\tif (thisObj.paletteSetsAlpha === true || (thisObj.paletteSetsAlpha === 'auto' && thisObj._paletteHasTransparency)) {\r\n\t\t\t\tcolor.rgba[3] = 1.0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthisObj.fromRGBA.apply(thisObj, color.rgba);\r\n\r\n\t\tthisObj.trigger('input');\r\n\t\tthisObj.trigger('change');\r\n\r\n\t\tif (thisObj.hideOnPaletteClick) {\r\n\t\t\tthisObj.hide();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tsetPad : function (thisObj, e, ofsX, ofsY) {\r\n\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\tvar x = ofsX + pointerAbs.x - jsc._pointerOrigin.x - thisObj.padding - thisObj.controlBorderWidth;\r\n\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\r\n\r\n\t\tvar xVal = x * (360 / (thisObj.width - 1));\r\n\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\r\n\r\n\t\tswitch (jsc.getPadYChannel(thisObj)) {\r\n\t\tcase 's': thisObj.fromHSVA(xVal, yVal, null, null); break;\r\n\t\tcase 'v': thisObj.fromHSVA(xVal, null, yVal, null); break;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tsetSld : function (thisObj, e, ofsY) {\r\n\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\r\n\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\r\n\r\n\t\tswitch (jsc.getSliderChannel(thisObj)) {\r\n\t\tcase 's': thisObj.fromHSVA(null, yVal, null, null); break;\r\n\t\tcase 'v': thisObj.fromHSVA(null, null, yVal, null); break;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tsetASld : function (thisObj, e, ofsY) {\r\n\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\r\n\t\tvar yVal = 1.0 - (y * (1.0 / (thisObj.height - 1)));\r\n\r\n\t\tif (yVal < 1.0) {\r\n\t\t\t// if format is flexible and the current format doesn't support alpha, switch to a suitable one\r\n\t\t\tvar fmt = thisObj.getFormat();\r\n\t\t\tif (thisObj.format.toLowerCase() === 'any' && !jsc.isAlphaFormat(fmt)) {\r\n\t\t\t\tthisObj._setFormat(fmt === 'hex' ? 'hexa' : 'rgba');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthisObj.fromHSVA(null, null, null, yVal);\r\n\t},\r\n\r\n\r\n\tcreatePadCanvas : function () {\r\n\r\n\t\tvar ret = {\r\n\t\t\telm: null,\r\n\t\t\tdraw: null\r\n\t\t};\r\n\r\n\t\tvar canvas = jsc.createEl('canvas');\r\n\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\tvar drawFunc = function (width, height, type) {\r\n\t\t\tcanvas.width = width;\r\n\t\t\tcanvas.height = height;\r\n\r\n\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\tvar hGrad = ctx.createLinearGradient(0, 0, canvas.width, 0);\r\n\t\t\thGrad.addColorStop(0 / 6, '#F00');\r\n\t\t\thGrad.addColorStop(1 / 6, '#FF0');\r\n\t\t\thGrad.addColorStop(2 / 6, '#0F0');\r\n\t\t\thGrad.addColorStop(3 / 6, '#0FF');\r\n\t\t\thGrad.addColorStop(4 / 6, '#00F');\r\n\t\t\thGrad.addColorStop(5 / 6, '#F0F');\r\n\t\t\thGrad.addColorStop(6 / 6, '#F00');\r\n\r\n\t\t\tctx.fillStyle = hGrad;\r\n\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\tvar vGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\tswitch (type.toLowerCase()) {\r\n\t\t\tcase 's':\r\n\t\t\t\tvGrad.addColorStop(0, 'rgba(255,255,255,0)');\r\n\t\t\t\tvGrad.addColorStop(1, 'rgba(255,255,255,1)');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'v':\r\n\t\t\t\tvGrad.addColorStop(0, 'rgba(0,0,0,0)');\r\n\t\t\t\tvGrad.addColorStop(1, 'rgba(0,0,0,1)');\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tctx.fillStyle = vGrad;\r\n\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t};\r\n\r\n\t\tret.elm = canvas;\r\n\t\tret.draw = drawFunc;\r\n\r\n\t\treturn ret;\r\n\t},\r\n\r\n\r\n\tcreateSliderGradient : function () {\r\n\r\n\t\tvar ret = {\r\n\t\t\telm: null,\r\n\t\t\tdraw: null\r\n\t\t};\r\n\r\n\t\tvar canvas = jsc.createEl('canvas');\r\n\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\tvar drawFunc = function (width, height, color1, color2) {\r\n\t\t\tcanvas.width = width;\r\n\t\t\tcanvas.height = height;\r\n\r\n\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\tgrad.addColorStop(0, color1);\r\n\t\t\tgrad.addColorStop(1, color2);\r\n\r\n\t\t\tctx.fillStyle = grad;\r\n\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t};\r\n\r\n\t\tret.elm = canvas;\r\n\t\tret.draw = drawFunc;\r\n\r\n\t\treturn ret;\r\n\t},\r\n\r\n\r\n\tcreateASliderGradient : function () {\r\n\r\n\t\tvar ret = {\r\n\t\t\telm: null,\r\n\t\t\tdraw: null\r\n\t\t};\r\n\r\n\t\tvar canvas = jsc.createEl('canvas');\r\n\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\tvar drawFunc = function (width, height, color) {\r\n\t\t\tcanvas.width = width;\r\n\t\t\tcanvas.height = height;\r\n\r\n\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\tvar sqSize = canvas.width / 2;\r\n\t\t\tvar sqColor1 = jsc.pub.chessboardColor1;\r\n\t\t\tvar sqColor2 = jsc.pub.chessboardColor2;\r\n\r\n\t\t\t// dark gray background\r\n\t\t\tctx.fillStyle = sqColor1;\r\n\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\tif (sqSize > 0) { // to avoid infinite loop\r\n\t\t\t\tfor (var y = 0; y < canvas.height; y += sqSize * 2) {\r\n\t\t\t\t\t// light gray squares\r\n\t\t\t\t\tctx.fillStyle = sqColor2;\r\n\t\t\t\t\tctx.fillRect(0, y, sqSize, sqSize);\r\n\t\t\t\t\tctx.fillRect(sqSize, y + sqSize, sqSize, sqSize);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\tgrad.addColorStop(0, color);\r\n\t\t\tgrad.addColorStop(1, 'rgba(0,0,0,0)');\r\n\r\n\t\t\tctx.fillStyle = grad;\r\n\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t};\r\n\r\n\t\tret.elm = canvas;\r\n\t\tret.draw = drawFunc;\r\n\r\n\t\treturn ret;\r\n\t},\r\n\r\n\r\n\tBoxShadow : (function () {\r\n\t\tvar BoxShadow = function (hShadow, vShadow, blur, spread, color, inset) {\r\n\t\t\tthis.hShadow = hShadow;\r\n\t\t\tthis.vShadow = vShadow;\r\n\t\t\tthis.blur = blur;\r\n\t\t\tthis.spread = spread;\r\n\t\t\tthis.color = color;\r\n\t\t\tthis.inset = !!inset;\r\n\t\t};\r\n\r\n\t\tBoxShadow.prototype.toString = function () {\r\n\t\t\tvar vals = [\r\n\t\t\t\tMath.round(this.hShadow) + 'px',\r\n\t\t\t\tMath.round(this.vShadow) + 'px',\r\n\t\t\t\tMath.round(this.blur) + 'px',\r\n\t\t\t\tMath.round(this.spread) + 'px',\r\n\t\t\t\tthis.color\r\n\t\t\t];\r\n\t\t\tif (this.inset) {\r\n\t\t\t\tvals.push('inset');\r\n\t\t\t}\r\n\t\t\treturn vals.join(' ');\r\n\t\t};\r\n\r\n\t\treturn BoxShadow;\r\n\t})(),\r\n\r\n\r\n\tflags : {\r\n\t\tleaveValue : 1 << 0,\r\n\t\tleaveAlpha : 1 << 1,\r\n\t\tleavePreview : 1 << 2,\r\n\t},\r\n\r\n\r\n\tenumOpts : {\r\n\t\tformat: ['auto', 'any', 'hex', 'hexa', 'rgb', 'rgba'],\r\n\t\tpreviewPosition: ['left', 'right'],\r\n\t\tmode: ['hsv', 'hvs', 'hs', 'hv'],\r\n\t\tposition: ['left', 'right', 'top', 'bottom'],\r\n\t\talphaChannel: ['auto', true, false],\r\n\t\tpaletteSetsAlpha: ['auto', true, false],\r\n\t},\r\n\r\n\r\n\tdeprecatedOpts : {\r\n\t\t// <old_option>: <new_option>  (<new_option> can be null)\r\n\t\t'styleElement': 'previewElement',\r\n\t\t'onFineChange': 'onInput',\r\n\t\t'overwriteImportant': 'forceStyle',\r\n\t\t'closable': 'closeButton',\r\n\t\t'insetWidth': 'controlBorderWidth',\r\n\t\t'insetColor': 'controlBorderColor',\r\n\t\t'refine': null,\r\n\t},\r\n\r\n\r\n\tdocsRef : ' ' + 'See https://jscolor.com/docs/',\r\n\r\n\r\n\t//\r\n\t// Usage:\r\n\t// var myPicker = new JSColor(<targetElement> [, <options>])\r\n\t//\r\n\t// (constructor is accessible via both 'jscolor' and 'JSColor' name)\r\n\t//\r\n\r\n\tpub : function (targetElement, opts) {\r\n\r\n\t\tvar THIS = this;\r\n\r\n\t\tif (!opts) {\r\n\t\t\topts = {};\r\n\t\t}\r\n\r\n\t\tthis.channels = {\r\n\t\t\tr: 255, // red [0-255]\r\n\t\t\tg: 255, // green [0-255]\r\n\t\t\tb: 255, // blue [0-255]\r\n\t\t\th: 0, // hue [0-360]\r\n\t\t\ts: 0, // saturation [0-100]\r\n\t\t\tv: 100, // value (brightness) [0-100]\r\n\t\t\ta: 1.0, // alpha (opacity) [0.0 - 1.0]\r\n\t\t};\r\n\r\n\t\t// General options\r\n\t\t//\r\n\t\tthis.format = 'auto'; // 'auto' | 'any' | 'hex' | 'hexa' | 'rgb' | 'rgba' - Format of the input/output value\r\n\t\tthis.value = undefined; // INITIAL color value in any supported format. To change it later, use method fromString(), fromHSVA(), fromRGBA() or channel()\r\n\t\tthis.alpha = undefined; // INITIAL alpha value. To change it later, call method channel('A', <value>)\r\n\t\tthis.onChange = undefined; // called when color changes. Value can be either a function or a string with JS code.\r\n\t\tthis.onInput = undefined; // called repeatedly as the color is being changed, e.g. while dragging a slider. Value can be either a function or a string with JS code.\r\n\t\tthis.valueElement = undefined; // element that will be used to display and input the color value\r\n\t\tthis.alphaElement = undefined; // element that will be used to display and input the alpha (opacity) value\r\n\t\tthis.previewElement = undefined; // element that will preview the picked color using CSS background\r\n\t\tthis.previewPosition = 'left'; // 'left' | 'right' - position of the color preview in previewElement\r\n\t\tthis.previewSize = 32; // (px) width of the color preview displayed in previewElement\r\n\t\tthis.previewPadding = 8; // (px) space between color preview and content of the previewElement\r\n\t\tthis.required = true; // whether the associated text input must always contain a color value. If false, the input can be left empty.\r\n\t\tthis.hash = true; // whether to prefix the HEX color code with # symbol (only applicable for HEX format)\r\n\t\tthis.uppercase = true; // whether to show the HEX color code in upper case (only applicable for HEX format)\r\n\t\tthis.forceStyle = true; // whether to overwrite CSS style of the previewElement using !important flag\r\n\r\n\t\t// Color Picker options\r\n\t\t//\r\n\t\tthis.width = 181; // width of the color spectrum (in px)\r\n\t\tthis.height = 101; // height of the color spectrum (in px)\r\n\t\tthis.mode = 'HSV'; // 'HSV' | 'HVS' | 'HS' | 'HV' - layout of the color picker controls\r\n\t\tthis.alphaChannel = 'auto'; // 'auto' | true | false - if alpha channel is enabled, the alpha slider will be visible. If 'auto', it will be determined according to color format\r\n\t\tthis.position = 'bottom'; // 'left' | 'right' | 'top' | 'bottom' - position relative to the target element\r\n\t\tthis.smartPosition = true; // automatically change picker position when there is not enough space for it\r\n\t\tthis.showOnClick = true; // whether to show the picker when user clicks its target element\r\n\t\tthis.hideOnLeave = true; // whether to automatically hide the picker when user leaves its target element (e.g. upon clicking the document)\r\n\t\tthis.palette = []; // colors to be displayed in the palette, specified as an array or a string of space separated color values (in any supported format)\r\n\t\tthis.paletteCols = 10; // number of columns in the palette\r\n\t\tthis.paletteSetsAlpha = 'auto'; // 'auto' | true | false - if true, palette colors that don't specify alpha will set alpha to 1.0\r\n\t\tthis.paletteHeight = 16; // maximum height (px) of a row in the palette\r\n\t\tthis.paletteSpacing = 4; // distance (px) between color samples in the palette\r\n\t\tthis.hideOnPaletteClick = false; // when set to true, clicking the palette will also hide the color picker\r\n\t\tthis.sliderSize = 16; // px\r\n\t\tthis.crossSize = 8; // px\r\n\t\tthis.closeButton = false; // whether to display the Close button\r\n\t\tthis.closeText = 'Close';\r\n\t\tthis.buttonColor = 'rgba(0,0,0,1)'; // CSS color\r\n\t\tthis.buttonHeight = 18; // px\r\n\t\tthis.padding = 12; // px\r\n\t\tthis.backgroundColor = 'rgba(255,255,255,1)'; // CSS color\r\n\t\tthis.borderWidth = 1; // px\r\n\t\tthis.borderColor = 'rgba(187,187,187,1)'; // CSS color\r\n\t\tthis.borderRadius = 8; // px\r\n\t\tthis.controlBorderWidth = 1; // px\r\n\t\tthis.controlBorderColor = 'rgba(187,187,187,1)'; // CSS color\r\n\t\tthis.shadow = true; // whether to display a shadow\r\n\t\tthis.shadowBlur = 15; // px\r\n\t\tthis.shadowColor = 'rgba(0,0,0,0.2)'; // CSS color\r\n\t\tthis.pointerColor = 'rgba(76,76,76,1)'; // CSS color\r\n\t\tthis.pointerBorderWidth = 1; // px\r\n\t\tthis.pointerBorderColor = 'rgba(255,255,255,1)'; // CSS color\r\n\t\tthis.pointerThickness = 2; // px\r\n\t\tthis.zIndex = 5000;\r\n\t\tthis.container = undefined; // where to append the color picker (BODY element by default)\r\n\r\n\t\t// Experimental\r\n\t\t//\r\n\t\tthis.minS = 0; // min allowed saturation (0 - 100)\r\n\t\tthis.maxS = 100; // max allowed saturation (0 - 100)\r\n\t\tthis.minV = 0; // min allowed value (brightness) (0 - 100)\r\n\t\tthis.maxV = 100; // max allowed value (brightness) (0 - 100)\r\n\t\tthis.minA = 0.0; // min allowed alpha (opacity) (0.0 - 1.0)\r\n\t\tthis.maxA = 1.0; // max allowed alpha (opacity) (0.0 - 1.0)\r\n\r\n\r\n\t\t// Getter: option(name)\r\n\t\t// Setter: option(name, value)\r\n\t\t//         option({name:value, ...})\r\n\t\t//\r\n\t\tthis.option = function () {\r\n\t\t\tif (!arguments.length) {\r\n\t\t\t\tthrow new Error('No option specified');\r\n\t\t\t}\r\n\r\n\t\t\tif (arguments.length === 1 && typeof arguments[0] === 'string') {\r\n\t\t\t\t// getting a single option\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn getOption(arguments[0]);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t} else if (arguments.length >= 2 && typeof arguments[0] === 'string') {\r\n\t\t\t\t// setting a single option\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (!setOption(arguments[0], arguments[1])) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tthis.redraw(); // immediately redraws the picker, if it's displayed\r\n\t\t\t\tthis.exposeColor(); // in case some preview-related or format-related option was changed\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t} else if (arguments.length === 1 && typeof arguments[0] === 'object') {\r\n\t\t\t\t// setting multiple options\r\n\t\t\t\tvar opts = arguments[0];\r\n\t\t\t\tvar success = true;\r\n\t\t\t\tfor (var opt in opts) {\r\n\t\t\t\t\tif (opts.hasOwnProperty(opt)) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tif (!setOption(opt, opts[opt])) {\r\n\t\t\t\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.redraw(); // immediately redraws the picker, if it's displayed\r\n\t\t\t\tthis.exposeColor(); // in case some preview-related or format-related option was changed\r\n\t\t\t\treturn success;\r\n\t\t\t}\r\n\r\n\t\t\tthrow new Error('Invalid arguments');\r\n\t\t}\r\n\r\n\r\n\t\t// Getter: channel(name)\r\n\t\t// Setter: channel(name, value)\r\n\t\t//\r\n\t\tthis.channel = function (name, value) {\r\n\t\t\tif (typeof name !== 'string') {\r\n\t\t\t\tthrow new Error('Invalid value for channel name: ' + name);\r\n\t\t\t}\r\n\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\t// getting channel value\r\n\t\t\t\tif (!this.channels.hasOwnProperty(name.toLowerCase())) {\r\n\t\t\t\t\tconsole.warn('Getting unknown channel: ' + name);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn this.channels[name.toLowerCase()];\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// setting channel value\r\n\t\t\t\tvar res = false;\r\n\t\t\t\tswitch (name.toLowerCase()) {\r\n\t\t\t\t\tcase 'r': res = this.fromRGBA(value, null, null, null); break;\r\n\t\t\t\t\tcase 'g': res = this.fromRGBA(null, value, null, null); break;\r\n\t\t\t\t\tcase 'b': res = this.fromRGBA(null, null, value, null); break;\r\n\t\t\t\t\tcase 'h': res = this.fromHSVA(value, null, null, null); break;\r\n\t\t\t\t\tcase 's': res = this.fromHSVA(null, value, null, null); break;\r\n\t\t\t\t\tcase 'v': res = this.fromHSVA(null, null, value, null); break;\r\n\t\t\t\t\tcase 'a': res = this.fromHSVA(null, null, null, value); break;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.warn('Setting unknown channel: ' + name);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tthis.redraw(); // immediately redraws the picker, if it's displayed\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\r\n\t\t// Triggers given input event(s) by:\r\n\t\t// - executing on<Event> callback specified as picker's option\r\n\t\t// - triggering standard DOM event listeners attached to the value element\r\n\t\t//\r\n\t\t// It is possible to specify multiple events separated with a space.\r\n\t\t//\r\n\t\tthis.trigger = function (eventNames) {\r\n\t\t\tvar evs = jsc.strList(eventNames);\r\n\t\t\tfor (var i = 0; i < evs.length; i += 1) {\r\n\t\t\t\tvar ev = evs[i].toLowerCase();\r\n\r\n\t\t\t\t// trigger a callback\r\n\t\t\t\tvar callbackProp = null;\r\n\t\t\t\tswitch (ev) {\r\n\t\t\t\t\tcase 'input': callbackProp = 'onInput'; break;\r\n\t\t\t\t\tcase 'change': callbackProp = 'onChange'; break;\r\n\t\t\t\t}\r\n\t\t\t\tif (callbackProp) {\r\n\t\t\t\t\tjsc.triggerCallback(this, callbackProp);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// trigger standard DOM event listeners on the value element\r\n\t\t\t\tjsc.triggerInputEvent(this.valueElement, ev, true, true);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\t// h: 0-360\r\n\t\t// s: 0-100\r\n\t\t// v: 0-100\r\n\t\t// a: 0.0-1.0\r\n\t\t//\r\n\t\tthis.fromHSVA = function (h, s, v, a, flags) { // null = don't change\r\n\t\t\tif (h === undefined) { h = null; }\r\n\t\t\tif (s === undefined) { s = null; }\r\n\t\t\tif (v === undefined) { v = null; }\r\n\t\t\tif (a === undefined) { a = null; }\r\n\r\n\t\t\tif (h !== null) {\r\n\t\t\t\tif (isNaN(h)) { return false; }\r\n\t\t\t\tthis.channels.h = Math.max(0, Math.min(360, h));\r\n\t\t\t}\r\n\t\t\tif (s !== null) {\r\n\t\t\t\tif (isNaN(s)) { return false; }\r\n\t\t\t\tthis.channels.s = Math.max(0, Math.min(100, this.maxS, s), this.minS);\r\n\t\t\t}\r\n\t\t\tif (v !== null) {\r\n\t\t\t\tif (isNaN(v)) { return false; }\r\n\t\t\t\tthis.channels.v = Math.max(0, Math.min(100, this.maxV, v), this.minV);\r\n\t\t\t}\r\n\t\t\tif (a !== null) {\r\n\t\t\t\tif (isNaN(a)) { return false; }\r\n\t\t\t\tthis.channels.a = this.hasAlphaChannel() ?\r\n\t\t\t\t\tMath.max(0, Math.min(1, this.maxA, a), this.minA) :\r\n\t\t\t\t\t1.0; // if alpha channel is disabled, the color should stay 100% opaque\r\n\t\t\t}\r\n\r\n\t\t\tvar rgb = jsc.HSV_RGB(\r\n\t\t\t\tthis.channels.h,\r\n\t\t\t\tthis.channels.s,\r\n\t\t\t\tthis.channels.v\r\n\t\t\t);\r\n\t\t\tthis.channels.r = rgb[0];\r\n\t\t\tthis.channels.g = rgb[1];\r\n\t\t\tthis.channels.b = rgb[2];\r\n\r\n\t\t\tthis.exposeColor(flags);\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\r\n\t\t// r: 0-255\r\n\t\t// g: 0-255\r\n\t\t// b: 0-255\r\n\t\t// a: 0.0-1.0\r\n\t\t//\r\n\t\tthis.fromRGBA = function (r, g, b, a, flags) { // null = don't change\r\n\t\t\tif (r === undefined) { r = null; }\r\n\t\t\tif (g === undefined) { g = null; }\r\n\t\t\tif (b === undefined) { b = null; }\r\n\t\t\tif (a === undefined) { a = null; }\r\n\r\n\t\t\tif (r !== null) {\r\n\t\t\t\tif (isNaN(r)) { return false; }\r\n\t\t\t\tr = Math.max(0, Math.min(255, r));\r\n\t\t\t}\r\n\t\t\tif (g !== null) {\r\n\t\t\t\tif (isNaN(g)) { return false; }\r\n\t\t\t\tg = Math.max(0, Math.min(255, g));\r\n\t\t\t}\r\n\t\t\tif (b !== null) {\r\n\t\t\t\tif (isNaN(b)) { return false; }\r\n\t\t\t\tb = Math.max(0, Math.min(255, b));\r\n\t\t\t}\r\n\t\t\tif (a !== null) {\r\n\t\t\t\tif (isNaN(a)) { return false; }\r\n\t\t\t\tthis.channels.a = this.hasAlphaChannel() ?\r\n\t\t\t\t\tMath.max(0, Math.min(1, this.maxA, a), this.minA) :\r\n\t\t\t\t\t1.0; // if alpha channel is disabled, the color should stay 100% opaque\r\n\t\t\t}\r\n\r\n\t\t\tvar hsv = jsc.RGB_HSV(\r\n\t\t\t\tr===null ? this.channels.r : r,\r\n\t\t\t\tg===null ? this.channels.g : g,\r\n\t\t\t\tb===null ? this.channels.b : b\r\n\t\t\t);\r\n\t\t\tif (hsv[0] !== null) {\r\n\t\t\t\tthis.channels.h = Math.max(0, Math.min(360, hsv[0]));\r\n\t\t\t}\r\n\t\t\tif (hsv[2] !== 0) { // fully black color stays black through entire saturation range, so let's not change saturation\r\n\t\t\t\tthis.channels.s = Math.max(0, this.minS, Math.min(100, this.maxS, hsv[1]));\r\n\t\t\t}\r\n\t\t\tthis.channels.v = Math.max(0, this.minV, Math.min(100, this.maxV, hsv[2]));\r\n\r\n\t\t\t// update RGB according to final HSV, as some values might be trimmed\r\n\t\t\tvar rgb = jsc.HSV_RGB(this.channels.h, this.channels.s, this.channels.v);\r\n\t\t\tthis.channels.r = rgb[0];\r\n\t\t\tthis.channels.g = rgb[1];\r\n\t\t\tthis.channels.b = rgb[2];\r\n\r\n\t\t\tthis.exposeColor(flags);\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\r\n\t\t// DEPRECATED. Use .fromHSVA() instead\r\n\t\t//\r\n\t\tthis.fromHSV = function (h, s, v, flags) {\r\n\t\t\tconsole.warn('fromHSV() method is DEPRECATED. Using fromHSVA() instead.' + jsc.docsRef);\r\n\t\t\treturn this.fromHSVA(h, s, v, null, flags);\r\n\t\t};\r\n\r\n\r\n\t\t// DEPRECATED. Use .fromRGBA() instead\r\n\t\t//\r\n\t\tthis.fromRGB = function (r, g, b, flags) {\r\n\t\t\tconsole.warn('fromRGB() method is DEPRECATED. Using fromRGBA() instead.' + jsc.docsRef);\r\n\t\t\treturn this.fromRGBA(r, g, b, null, flags);\r\n\t\t};\r\n\r\n\r\n\t\tthis.fromString = function (str, flags) {\r\n\t\t\tif (!this.required && str.trim() === '') {\r\n\t\t\t\t// setting empty string to an optional color input\r\n\t\t\t\tthis.setPreviewElementBg(null);\r\n\t\t\t\tthis.setValueElementValue('');\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tvar color = jsc.parseColorString(str);\r\n\t\t\tif (!color) {\r\n\t\t\t\treturn false; // could not parse\r\n\t\t\t}\r\n\t\t\tif (this.format.toLowerCase() === 'any') {\r\n\t\t\t\tthis._setFormat(color.format); // adapt format\r\n\t\t\t\tif (!jsc.isAlphaFormat(this.getFormat())) {\r\n\t\t\t\t\tcolor.rgba[3] = 1.0; // when switching to a format that doesn't support alpha, set full opacity\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.fromRGBA(\r\n\t\t\t\tcolor.rgba[0],\r\n\t\t\t\tcolor.rgba[1],\r\n\t\t\t\tcolor.rgba[2],\r\n\t\t\t\tcolor.rgba[3],\r\n\t\t\t\tflags\r\n\t\t\t);\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\r\n\t\tthis.toString = function (format) {\r\n\t\t\tif (format === undefined) {\r\n\t\t\t\tformat = this.getFormat(); // format not specified -> use the current format\r\n\t\t\t}\r\n\t\t\tswitch (format.toLowerCase()) {\r\n\t\t\t\tcase 'hex': return this.toHEXString(); break;\r\n\t\t\t\tcase 'hexa': return this.toHEXAString(); break;\r\n\t\t\t\tcase 'rgb': return this.toRGBString(); break;\r\n\t\t\t\tcase 'rgba': return this.toRGBAString(); break;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\r\n\t\tthis.toHEXString = function () {\r\n\t\t\treturn jsc.hexColor(\r\n\t\t\t\tthis.channels.r,\r\n\t\t\t\tthis.channels.g,\r\n\t\t\t\tthis.channels.b\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis.toHEXAString = function () {\r\n\t\t\treturn jsc.hexaColor(\r\n\t\t\t\tthis.channels.r,\r\n\t\t\t\tthis.channels.g,\r\n\t\t\t\tthis.channels.b,\r\n\t\t\t\tthis.channels.a\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis.toRGBString = function () {\r\n\t\t\treturn jsc.rgbColor(\r\n\t\t\t\tthis.channels.r,\r\n\t\t\t\tthis.channels.g,\r\n\t\t\t\tthis.channels.b\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis.toRGBAString = function () {\r\n\t\t\treturn jsc.rgbaColor(\r\n\t\t\t\tthis.channels.r,\r\n\t\t\t\tthis.channels.g,\r\n\t\t\t\tthis.channels.b,\r\n\t\t\t\tthis.channels.a\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis.toGrayscale = function () {\r\n\t\t\treturn (\r\n\t\t\t\t0.213 * this.channels.r +\r\n\t\t\t\t0.715 * this.channels.g +\r\n\t\t\t\t0.072 * this.channels.b\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis.toCanvas = function () {\r\n\t\t\treturn jsc.genColorPreviewCanvas(this.toRGBAString()).canvas;\r\n\t\t};\r\n\r\n\r\n\t\tthis.toDataURL = function () {\r\n\t\t\treturn this.toCanvas().toDataURL();\r\n\t\t};\r\n\r\n\r\n\t\tthis.toBackground = function () {\r\n\t\t\treturn jsc.pub.background(this.toRGBAString());\r\n\t\t};\r\n\r\n\r\n\t\tthis.isLight = function () {\r\n\t\t\treturn this.toGrayscale() > 255 / 2;\r\n\t\t};\r\n\r\n\r\n\t\tthis.hide = function () {\r\n\t\t\tif (isPickerOwner()) {\r\n\t\t\t\tdetachPicker();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.show = function () {\r\n\t\t\tdrawPicker();\r\n\t\t};\r\n\r\n\r\n\t\tthis.redraw = function () {\r\n\t\t\tif (isPickerOwner()) {\r\n\t\t\t\tdrawPicker();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.getFormat = function () {\r\n\t\t\treturn this._currentFormat;\r\n\t\t};\r\n\r\n\r\n\t\tthis._setFormat = function (format) {\r\n\t\t\tthis._currentFormat = format.toLowerCase();\r\n\t\t};\r\n\r\n\r\n\t\tthis.hasAlphaChannel = function () {\r\n\t\t\tif (this.alphaChannel === 'auto') {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tthis.format.toLowerCase() === 'any' || // format can change on the fly (e.g. from hex to rgba), so let's consider the alpha channel enabled\r\n\t\t\t\t\tjsc.isAlphaFormat(this.getFormat()) || // the current format supports alpha channel\r\n\t\t\t\t\tthis.alpha !== undefined || // initial alpha value is set, so we're working with alpha channel\r\n\t\t\t\t\tthis.alphaElement !== undefined // the alpha value is redirected, so we're working with alpha channel\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\treturn this.alphaChannel; // the alpha channel is explicitly set\r\n\t\t};\r\n\r\n\r\n\t\tthis.processValueInput = function (str) {\r\n\t\t\tif (!this.fromString(str)) {\r\n\t\t\t\t// could not parse the color value - let's just expose the current color\r\n\t\t\t\tthis.exposeColor();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.processAlphaInput = function (str) {\r\n\t\t\tif (!this.fromHSVA(null, null, null, parseFloat(str))) {\r\n\t\t\t\t// could not parse the alpha value - let's just expose the current color\r\n\t\t\t\tthis.exposeColor();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.exposeColor = function (flags) {\r\n\t\t\tvar colorStr = this.toString();\r\n\t\t\tvar fmt = this.getFormat();\r\n\r\n\t\t\t// reflect current color in data- attribute\r\n\t\t\tjsc.setDataAttr(this.targetElement, 'current-color', colorStr);\r\n\r\n\t\t\tif (!(flags & jsc.flags.leaveValue) && this.valueElement) {\r\n\t\t\t\tif (fmt === 'hex' || fmt === 'hexa') {\r\n\t\t\t\t\tif (!this.uppercase) { colorStr = colorStr.toLowerCase(); }\r\n\t\t\t\t\tif (!this.hash) { colorStr = colorStr.replace(/^#/, ''); }\r\n\t\t\t\t}\r\n\t\t\t\tthis.setValueElementValue(colorStr);\r\n\t\t\t}\r\n\r\n\t\t\tif (!(flags & jsc.flags.leaveAlpha) && this.alphaElement) {\r\n\t\t\t\tvar alphaVal = Math.round(this.channels.a * 100) / 100;\r\n\t\t\t\tthis.setAlphaElementValue(alphaVal);\r\n\t\t\t}\r\n\r\n\t\t\tif (!(flags & jsc.flags.leavePreview) && this.previewElement) {\r\n\t\t\t\tvar previewPos = null; // 'left' | 'right' (null -> fill the entire element)\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tjsc.isTextInput(this.previewElement) || // text input\r\n\t\t\t\t\t(jsc.isButton(this.previewElement) && !jsc.isButtonEmpty(this.previewElement)) // button with text\r\n\t\t\t\t) {\r\n\t\t\t\t\tpreviewPos = this.previewPosition;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setPreviewElementBg(this.toRGBAString());\r\n\t\t\t}\r\n\r\n\t\t\tif (isPickerOwner()) {\r\n\t\t\t\tredrawPad();\r\n\t\t\t\tredrawSld();\r\n\t\t\t\tredrawASld();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.setPreviewElementBg = function (color) {\r\n\t\t\tif (!this.previewElement) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar position = null; // color preview position:  null | 'left' | 'right'\r\n\t\t\tvar width = null; // color preview width:  px | null = fill the entire element\r\n\t\t\tif (\r\n\t\t\t\tjsc.isTextInput(this.previewElement) || // text input\r\n\t\t\t\t(jsc.isButton(this.previewElement) && !jsc.isButtonEmpty(this.previewElement)) // button with text\r\n\t\t\t) {\r\n\t\t\t\tposition = this.previewPosition;\r\n\t\t\t\twidth = this.previewSize;\r\n\t\t\t}\r\n\r\n\t\t\tvar backgrounds = [];\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t// there is no color preview to display -> let's remove any previous background image\r\n\t\t\t\tbackgrounds.push({\r\n\t\t\t\t\timage: 'none',\r\n\t\t\t\t\tposition: 'left top',\r\n\t\t\t\t\tsize: 'auto',\r\n\t\t\t\t\trepeat: 'no-repeat',\r\n\t\t\t\t\torigin: 'padding-box',\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// CSS gradient for background color preview\r\n\t\t\t\tbackgrounds.push({\r\n\t\t\t\t\timage: jsc.genColorPreviewGradient(\r\n\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\tposition,\r\n\t\t\t\t\t\twidth ? width - jsc.pub.previewSeparator.length : null\r\n\t\t\t\t\t),\r\n\t\t\t\t\tposition: 'left top',\r\n\t\t\t\t\tsize: 'auto',\r\n\t\t\t\t\trepeat: position ? 'repeat-y' : 'repeat',\r\n\t\t\t\t\torigin: 'padding-box',\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// data URL of generated PNG image with a gray transparency chessboard\r\n\t\t\t\tvar preview = jsc.genColorPreviewCanvas(\r\n\t\t\t\t\t'rgba(0,0,0,0)',\r\n\t\t\t\t\tposition ? {'left':'right', 'right':'left'}[position] : null,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\ttrue\r\n\t\t\t\t);\r\n\t\t\t\tbackgrounds.push({\r\n\t\t\t\t\timage: 'url(\\'' + preview.canvas.toDataURL() + '\\')',\r\n\t\t\t\t\tposition: (position || 'left') + ' top',\r\n\t\t\t\t\tsize: preview.width + 'px ' + preview.height + 'px',\r\n\t\t\t\t\trepeat: position ? 'repeat-y' : 'repeat',\r\n\t\t\t\t\torigin: 'padding-box',\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvar bg = {\r\n\t\t\t\timage: [],\r\n\t\t\t\tposition: [],\r\n\t\t\t\tsize: [],\r\n\t\t\t\trepeat: [],\r\n\t\t\t\torigin: [],\r\n\t\t\t};\r\n\t\t\tfor (var i = 0; i < backgrounds.length; i += 1) {\r\n\t\t\t\tbg.image.push(backgrounds[i].image);\r\n\t\t\t\tbg.position.push(backgrounds[i].position);\r\n\t\t\t\tbg.size.push(backgrounds[i].size);\r\n\t\t\t\tbg.repeat.push(backgrounds[i].repeat);\r\n\t\t\t\tbg.origin.push(backgrounds[i].origin);\r\n\t\t\t}\r\n\r\n\t\t\t// set previewElement's background-images\r\n\t\t\tvar sty = {\r\n\t\t\t\t'background-image': bg.image.join(', '),\r\n\t\t\t\t'background-position': bg.position.join(', '),\r\n\t\t\t\t'background-size': bg.size.join(', '),\r\n\t\t\t\t'background-repeat': bg.repeat.join(', '),\r\n\t\t\t\t'background-origin': bg.origin.join(', '),\r\n\t\t\t};\r\n\t\t\tjsc.setStyle(this.previewElement, sty, this.forceStyle);\r\n\r\n\r\n\t\t\t// set/restore previewElement's padding\r\n\t\t\tvar padding = {\r\n\t\t\t\tleft: null,\r\n\t\t\t\tright: null,\r\n\t\t\t};\r\n\t\t\tif (position) {\r\n\t\t\t\tpadding[position] = (this.previewSize + this.previewPadding) + 'px';\r\n\t\t\t}\r\n\r\n\t\t\tvar sty = {\r\n\t\t\t\t'padding-left': padding.left,\r\n\t\t\t\t'padding-right': padding.right,\r\n\t\t\t};\r\n\t\t\tjsc.setStyle(this.previewElement, sty, this.forceStyle, true);\r\n\t\t};\r\n\r\n\r\n\t\tthis.setValueElementValue = function (str) {\r\n\t\t\tif (this.valueElement) {\r\n\t\t\t\tif (jsc.nodeName(this.valueElement) === 'input') {\r\n\t\t\t\t\tthis.valueElement.value = str;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.valueElement.innerHTML = str;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.setAlphaElementValue = function (str) {\r\n\t\t\tif (this.alphaElement) {\r\n\t\t\t\tif (jsc.nodeName(this.alphaElement) === 'input') {\r\n\t\t\t\t\tthis.alphaElement.value = str;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.alphaElement.innerHTML = str;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis._processParentElementsInDOM = function () {\r\n\t\t\tif (this._parentElementsProcessed) { return; }\r\n\t\t\tthis._parentElementsProcessed = true;\r\n\r\n\t\t\tvar elm = this.targetElement;\r\n\t\t\tdo {\r\n\t\t\t\t// If the target element or one of its parent nodes has fixed position,\r\n\t\t\t\t// then use fixed positioning instead\r\n\t\t\t\tvar compStyle = jsc.getCompStyle(elm);\r\n\t\t\t\tif (compStyle.position && compStyle.position.toLowerCase() === 'fixed') {\r\n\t\t\t\t\tthis.fixed = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (elm !== this.targetElement) {\r\n\t\t\t\t\t// Ensure to attach onParentScroll only once to each parent element\r\n\t\t\t\t\t// (multiple targetElements can share the same parent nodes)\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// Note: It's not just offsetParents that can be scrollable,\r\n\t\t\t\t\t// that's why we loop through all parent nodes\r\n\t\t\t\t\tif (!jsc.getData(elm, 'hasScrollListener')) {\r\n\t\t\t\t\t\telm.addEventListener('scroll', jsc.onParentScroll, false);\r\n\t\t\t\t\t\tjsc.setData(elm, 'hasScrollListener', true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} while ((elm = elm.parentNode) && jsc.nodeName(elm) !== 'body');\r\n\t\t};\r\n\r\n\r\n\t\tthis.tryHide = function () {\r\n\t\t\tif (this.hideOnLeave) {\r\n\t\t\t\tthis.hide();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.set__palette = function (val) {\r\n\t\t\tthis.palette = val;\r\n\t\t\tthis._palette = jsc.parsePaletteValue(val);\r\n\t\t\tthis._paletteHasTransparency = jsc.containsTranparentColor(this._palette);\r\n\t\t};\r\n\r\n\r\n\t\tfunction setOption (option, value) {\r\n\t\t\tif (typeof option !== 'string') {\r\n\t\t\t\tthrow new Error('Invalid value for option name: ' + option);\r\n\t\t\t}\r\n\r\n\t\t\t// enum option\r\n\t\t\tif (jsc.enumOpts.hasOwnProperty(option)) {\r\n\t\t\t\tif (typeof value === 'string') { // enum string values are case insensitive\r\n\t\t\t\t\tvalue = value.toLowerCase();\r\n\t\t\t\t}\r\n\t\t\t\tif (jsc.enumOpts[option].indexOf(value) === -1) {\r\n\t\t\t\t\tthrow new Error('Option \\'' + option + '\\' has invalid value: ' + value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// deprecated option\r\n\t\t\tif (jsc.deprecatedOpts.hasOwnProperty(option)) {\r\n\t\t\t\tvar oldOpt = option;\r\n\t\t\t\tvar newOpt = jsc.deprecatedOpts[option];\r\n\t\t\t\tif (newOpt) {\r\n\t\t\t\t\t// if we have a new name for this option, let's log a warning and use the new name\r\n\t\t\t\t\tconsole.warn('Option \\'%s\\' is DEPRECATED, using \\'%s\\' instead.' + jsc.docsRef, oldOpt, newOpt);\r\n\t\t\t\t\toption = newOpt;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// new name not available for the option\r\n\t\t\t\t\tthrow new Error('Option \\'' + option + '\\' is DEPRECATED');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar setter = 'set__' + option;\r\n\r\n\t\t\tif (typeof THIS[setter] === 'function') { // a setter exists for this option\r\n\t\t\t\tTHIS[setter](value);\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t} else if (option in THIS) { // option exists as a property\r\n\t\t\t\tTHIS[option] = value;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tthrow new Error('Unrecognized configuration option: ' + option);\r\n\t\t}\r\n\r\n\r\n\t\tfunction getOption (option) {\r\n\t\t\tif (typeof option !== 'string') {\r\n\t\t\t\tthrow new Error('Invalid value for option name: ' + option);\r\n\t\t\t}\r\n\r\n\t\t\t// deprecated option\r\n\t\t\tif (jsc.deprecatedOpts.hasOwnProperty(option)) {\r\n\t\t\t\tvar oldOpt = option;\r\n\t\t\t\tvar newOpt = jsc.deprecatedOpts[option];\r\n\t\t\t\tif (newOpt) {\r\n\t\t\t\t\t// if we have a new name for this option, let's log a warning and use the new name\r\n\t\t\t\t\tconsole.warn('Option \\'%s\\' is DEPRECATED, using \\'%s\\' instead.' + jsc.docsRef, oldOpt, newOpt);\r\n\t\t\t\t\toption = newOpt;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// new name not available for the option\r\n\t\t\t\t\tthrow new Error('Option \\'' + option + '\\' is DEPRECATED');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar getter = 'get__' + option;\r\n\r\n\t\t\tif (typeof THIS[getter] === 'function') { // a getter exists for this option\r\n\t\t\t\treturn THIS[getter](value);\r\n\r\n\t\t\t} else if (option in THIS) { // option exists as a property\r\n\t\t\t\treturn THIS[option];\r\n\t\t\t}\r\n\r\n\t\t\tthrow new Error('Unrecognized configuration option: ' + option);\r\n\t\t}\r\n\r\n\r\n\t\tfunction detachPicker () {\r\n\t\t\tjsc.removeClass(THIS.targetElement, jsc.pub.activeClassName);\r\n\t\t\tjsc.picker.wrap.parentNode.removeChild(jsc.picker.wrap);\r\n\t\t\tdelete jsc.picker.owner;\r\n\t\t}\r\n\r\n\r\n\t\tfunction drawPicker () {\r\n\r\n\t\t\t// At this point, when drawing the picker, we know what the parent elements are\r\n\t\t\t// and we can do all related DOM operations, such as registering events on them\r\n\t\t\t// or checking their positioning\r\n\t\t\tTHIS._processParentElementsInDOM();\r\n\r\n\t\t\tif (!jsc.picker) {\r\n\t\t\t\tjsc.picker = {\r\n\t\t\t\t\towner: null, // owner picker instance\r\n\t\t\t\t\twrap : jsc.createEl('div'),\r\n\t\t\t\t\tbox : jsc.createEl('div'),\r\n\t\t\t\t\tboxS : jsc.createEl('div'), // shadow area\r\n\t\t\t\t\tboxB : jsc.createEl('div'), // border\r\n\t\t\t\t\tpad : jsc.createEl('div'),\r\n\t\t\t\t\tpadB : jsc.createEl('div'), // border\r\n\t\t\t\t\tpadM : jsc.createEl('div'), // mouse/touch area\r\n\t\t\t\t\tpadCanvas : jsc.createPadCanvas(),\r\n\t\t\t\t\tcross : jsc.createEl('div'),\r\n\t\t\t\t\tcrossBY : jsc.createEl('div'), // border Y\r\n\t\t\t\t\tcrossBX : jsc.createEl('div'), // border X\r\n\t\t\t\t\tcrossLY : jsc.createEl('div'), // line Y\r\n\t\t\t\t\tcrossLX : jsc.createEl('div'), // line X\r\n\t\t\t\t\tsld : jsc.createEl('div'), // slider\r\n\t\t\t\t\tsldB : jsc.createEl('div'), // border\r\n\t\t\t\t\tsldM : jsc.createEl('div'), // mouse/touch area\r\n\t\t\t\t\tsldGrad : jsc.createSliderGradient(),\r\n\t\t\t\t\tsldPtrS : jsc.createEl('div'), // slider pointer spacer\r\n\t\t\t\t\tsldPtrIB : jsc.createEl('div'), // slider pointer inner border\r\n\t\t\t\t\tsldPtrMB : jsc.createEl('div'), // slider pointer middle border\r\n\t\t\t\t\tsldPtrOB : jsc.createEl('div'), // slider pointer outer border\r\n\t\t\t\t\tasld : jsc.createEl('div'), // alpha slider\r\n\t\t\t\t\tasldB : jsc.createEl('div'), // border\r\n\t\t\t\t\tasldM : jsc.createEl('div'), // mouse/touch area\r\n\t\t\t\t\tasldGrad : jsc.createASliderGradient(),\r\n\t\t\t\t\tasldPtrS : jsc.createEl('div'), // slider pointer spacer\r\n\t\t\t\t\tasldPtrIB : jsc.createEl('div'), // slider pointer inner border\r\n\t\t\t\t\tasldPtrMB : jsc.createEl('div'), // slider pointer middle border\r\n\t\t\t\t\tasldPtrOB : jsc.createEl('div'), // slider pointer outer border\r\n\t\t\t\t\tpal : jsc.createEl('div'), // palette\r\n\t\t\t\t\tbtn : jsc.createEl('div'),\r\n\t\t\t\t\tbtnT : jsc.createEl('span'), // text\r\n\t\t\t\t};\r\n\r\n\t\t\t\tjsc.picker.pad.appendChild(jsc.picker.padCanvas.elm);\r\n\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.pad);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBY);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBX);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLY);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLX);\r\n\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.cross);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padB);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padM);\r\n\r\n\t\t\t\tjsc.picker.sld.appendChild(jsc.picker.sldGrad.elm);\r\n\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sld);\r\n\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sldPtrOB);\r\n\t\t\t\tjsc.picker.sldPtrOB.appendChild(jsc.picker.sldPtrMB);\r\n\t\t\t\tjsc.picker.sldPtrMB.appendChild(jsc.picker.sldPtrIB);\r\n\t\t\t\tjsc.picker.sldPtrIB.appendChild(jsc.picker.sldPtrS);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldB);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldM);\r\n\r\n\t\t\t\tjsc.picker.asld.appendChild(jsc.picker.asldGrad.elm);\r\n\t\t\t\tjsc.picker.asldB.appendChild(jsc.picker.asld);\r\n\t\t\t\tjsc.picker.asldB.appendChild(jsc.picker.asldPtrOB);\r\n\t\t\t\tjsc.picker.asldPtrOB.appendChild(jsc.picker.asldPtrMB);\r\n\t\t\t\tjsc.picker.asldPtrMB.appendChild(jsc.picker.asldPtrIB);\r\n\t\t\t\tjsc.picker.asldPtrIB.appendChild(jsc.picker.asldPtrS);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.asldB);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.asldM);\r\n\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.pal);\r\n\r\n\t\t\t\tjsc.picker.btn.appendChild(jsc.picker.btnT);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.btn);\r\n\r\n\t\t\t\tjsc.picker.boxB.appendChild(jsc.picker.box);\r\n\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxS);\r\n\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxB);\r\n\r\n\t\t\t\tjsc.picker.wrap.addEventListener('touchstart', jsc.onPickerTouchStart,\r\n\t\t\t\t\tjsc.isPassiveEventSupported ? {passive: false} : false);\r\n\t\t\t}\r\n\r\n\t\t\tvar p = jsc.picker;\r\n\r\n\t\t\tvar displaySlider = !!jsc.getSliderChannel(THIS);\r\n\t\t\tvar displayAlphaSlider = THIS.hasAlphaChannel();\r\n\t\t\tvar pickerDims = jsc.getPickerDims(THIS);\r\n\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\r\n\t\t\tvar controlPadding = jsc.getControlPadding(THIS);\r\n\t\t\tvar borderRadius = Math.min(\r\n\t\t\t\tTHIS.borderRadius,\r\n\t\t\t\tMath.round(THIS.padding * Math.PI)); // px\r\n\t\t\tvar padCursor = 'crosshair';\r\n\r\n\t\t\t// wrap\r\n\t\t\tp.wrap.className = 'jscolor-picker-wrap';\r\n\t\t\tp.wrap.style.clear = 'both';\r\n\t\t\tp.wrap.style.width = pickerDims.borderW + 'px';\r\n\t\t\tp.wrap.style.height = pickerDims.borderH + 'px';\r\n\t\t\tp.wrap.style.zIndex = THIS.zIndex;\r\n\r\n\t\t\t// picker\r\n\t\t\tp.box.className = 'jscolor-picker';\r\n\t\t\tp.box.style.width = pickerDims.paddedW + 'px';\r\n\t\t\tp.box.style.height = pickerDims.paddedH + 'px';\r\n\t\t\tp.box.style.position = 'relative';\r\n\r\n\t\t\t// picker shadow\r\n\t\t\tp.boxS.className = 'jscolor-picker-shadow';\r\n\t\t\tp.boxS.style.position = 'absolute';\r\n\t\t\tp.boxS.style.left = '0';\r\n\t\t\tp.boxS.style.top = '0';\r\n\t\t\tp.boxS.style.width = '100%';\r\n\t\t\tp.boxS.style.height = '100%';\r\n\t\t\tjsc.setBorderRadius(p.boxS, borderRadius + 'px');\r\n\r\n\t\t\t// picker border\r\n\t\t\tp.boxB.className = 'jscolor-picker-border';\r\n\t\t\tp.boxB.style.position = 'relative';\r\n\t\t\tp.boxB.style.border = THIS.borderWidth + 'px solid';\r\n\t\t\tp.boxB.style.borderColor = THIS.borderColor;\r\n\t\t\tp.boxB.style.background = THIS.backgroundColor;\r\n\t\t\tjsc.setBorderRadius(p.boxB, borderRadius + 'px');\r\n\r\n\t\t\t// IE hack:\r\n\t\t\t// If the element is transparent, IE will trigger the event on the elements under it,\r\n\t\t\t// e.g. on Canvas or on elements with border\r\n\t\t\tp.padM.style.background = 'rgba(255,0,0,.2)';\r\n\t\t\tp.sldM.style.background = 'rgba(0,255,0,.2)';\r\n\t\t\tp.asldM.style.background = 'rgba(0,0,255,.2)';\r\n\r\n\t\t\tp.padM.style.opacity =\r\n\t\t\tp.sldM.style.opacity =\r\n\t\t\tp.asldM.style.opacity =\r\n\t\t\t\t'0';\r\n\r\n\t\t\t// pad\r\n\t\t\tp.pad.style.position = 'relative';\r\n\t\t\tp.pad.style.width = THIS.width + 'px';\r\n\t\t\tp.pad.style.height = THIS.height + 'px';\r\n\r\n\t\t\t// pad - color spectrum (HSV and HVS)\r\n\t\t\tp.padCanvas.draw(THIS.width, THIS.height, jsc.getPadYChannel(THIS));\r\n\r\n\t\t\t// pad border\r\n\t\t\tp.padB.style.position = 'absolute';\r\n\t\t\tp.padB.style.left = THIS.padding + 'px';\r\n\t\t\tp.padB.style.top = THIS.padding + 'px';\r\n\t\t\tp.padB.style.border = THIS.controlBorderWidth + 'px solid';\r\n\t\t\tp.padB.style.borderColor = THIS.controlBorderColor;\r\n\r\n\t\t\t// pad mouse area\r\n\t\t\tp.padM.style.position = 'absolute';\r\n\t\t\tp.padM.style.left = 0 + 'px';\r\n\t\t\tp.padM.style.top = 0 + 'px';\r\n\t\t\tp.padM.style.width = (THIS.padding + 2 * THIS.controlBorderWidth + THIS.width + controlPadding) + 'px';\r\n\t\t\tp.padM.style.height = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\r\n\t\t\tp.padM.style.cursor = padCursor;\r\n\t\t\tjsc.setData(p.padM, {\r\n\t\t\t\tinstance: THIS,\r\n\t\t\t\tcontrol: 'pad',\r\n\t\t\t})\r\n\r\n\t\t\t// pad cross\r\n\t\t\tp.cross.style.position = 'absolute';\r\n\t\t\tp.cross.style.left =\r\n\t\t\tp.cross.style.top =\r\n\t\t\t\t'0';\r\n\t\t\tp.cross.style.width =\r\n\t\t\tp.cross.style.height =\r\n\t\t\t\tcrossOuterSize + 'px';\r\n\r\n\t\t\t// pad cross border Y and X\r\n\t\t\tp.crossBY.style.position =\r\n\t\t\tp.crossBX.style.position =\r\n\t\t\t\t'absolute';\r\n\t\t\tp.crossBY.style.background =\r\n\t\t\tp.crossBX.style.background =\r\n\t\t\t\tTHIS.pointerBorderColor;\r\n\t\t\tp.crossBY.style.width =\r\n\t\t\tp.crossBX.style.height =\r\n\t\t\t\t(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\tp.crossBY.style.height =\r\n\t\t\tp.crossBX.style.width =\r\n\t\t\t\tcrossOuterSize + 'px';\r\n\t\t\tp.crossBY.style.left =\r\n\t\t\tp.crossBX.style.top =\r\n\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2) - THIS.pointerBorderWidth) + 'px';\r\n\t\t\tp.crossBY.style.top =\r\n\t\t\tp.crossBX.style.left =\r\n\t\t\t\t'0';\r\n\r\n\t\t\t// pad cross line Y and X\r\n\t\t\tp.crossLY.style.position =\r\n\t\t\tp.crossLX.style.position =\r\n\t\t\t\t'absolute';\r\n\t\t\tp.crossLY.style.background =\r\n\t\t\tp.crossLX.style.background =\r\n\t\t\t\tTHIS.pointerColor;\r\n\t\t\tp.crossLY.style.height =\r\n\t\t\tp.crossLX.style.width =\r\n\t\t\t\t(crossOuterSize - 2 * THIS.pointerBorderWidth) + 'px';\r\n\t\t\tp.crossLY.style.width =\r\n\t\t\tp.crossLX.style.height =\r\n\t\t\t\tTHIS.pointerThickness + 'px';\r\n\t\t\tp.crossLY.style.left =\r\n\t\t\tp.crossLX.style.top =\r\n\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2)) + 'px';\r\n\t\t\tp.crossLY.style.top =\r\n\t\t\tp.crossLX.style.left =\r\n\t\t\t\tTHIS.pointerBorderWidth + 'px';\r\n\r\n\r\n\t\t\t// slider\r\n\t\t\tp.sld.style.overflow = 'hidden';\r\n\t\t\tp.sld.style.width = THIS.sliderSize + 'px';\r\n\t\t\tp.sld.style.height = THIS.height + 'px';\r\n\r\n\t\t\t// slider gradient\r\n\t\t\tp.sldGrad.draw(THIS.sliderSize, THIS.height, '#000', '#000');\r\n\r\n\t\t\t// slider border\r\n\t\t\tp.sldB.style.display = displaySlider ? 'block' : 'none';\r\n\t\t\tp.sldB.style.position = 'absolute';\r\n\t\t\tp.sldB.style.left = (THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + 2 * controlPadding) + 'px';\r\n\t\t\tp.sldB.style.top = THIS.padding + 'px';\r\n\t\t\tp.sldB.style.border = THIS.controlBorderWidth + 'px solid';\r\n\t\t\tp.sldB.style.borderColor = THIS.controlBorderColor;\r\n\r\n\t\t\t// slider mouse area\r\n\t\t\tp.sldM.style.display = displaySlider ? 'block' : 'none';\r\n\t\t\tp.sldM.style.position = 'absolute';\r\n\t\t\tp.sldM.style.left = (THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding) + 'px';\r\n\t\t\tp.sldM.style.top = 0 + 'px';\r\n\t\t\tp.sldM.style.width = (\r\n\t\t\t\t\t(THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth) +\r\n\t\t\t\t\t(displayAlphaSlider ? 0 : Math.max(0, THIS.padding - controlPadding)) // remaining padding to the right edge\r\n\t\t\t\t) + 'px';\r\n\t\t\tp.sldM.style.height = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\r\n\t\t\tp.sldM.style.cursor = 'default';\r\n\t\t\tjsc.setData(p.sldM, {\r\n\t\t\t\tinstance: THIS,\r\n\t\t\t\tcontrol: 'sld',\r\n\t\t\t});\r\n\r\n\t\t\t// slider pointer inner and outer border\r\n\t\t\tp.sldPtrIB.style.border =\r\n\t\t\tp.sldPtrOB.style.border =\r\n\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\r\n\r\n\t\t\t// slider pointer outer border\r\n\t\t\tp.sldPtrOB.style.position = 'absolute';\r\n\t\t\tp.sldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\tp.sldPtrOB.style.top = '0';\r\n\r\n\t\t\t// slider pointer middle border\r\n\t\t\tp.sldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\r\n\r\n\t\t\t// slider pointer spacer\r\n\t\t\tp.sldPtrS.style.width = THIS.sliderSize + 'px';\r\n\t\t\tp.sldPtrS.style.height = jsc.pub.sliderInnerSpace + 'px';\r\n\r\n\r\n\t\t\t// alpha slider\r\n\t\t\tp.asld.style.overflow = 'hidden';\r\n\t\t\tp.asld.style.width = THIS.sliderSize + 'px';\r\n\t\t\tp.asld.style.height = THIS.height + 'px';\r\n\r\n\t\t\t// alpha slider gradient\r\n\t\t\tp.asldGrad.draw(THIS.sliderSize, THIS.height, '#000');\r\n\r\n\t\t\t// alpha slider border\r\n\t\t\tp.asldB.style.display = displayAlphaSlider ? 'block' : 'none';\r\n\t\t\tp.asldB.style.position = 'absolute';\r\n\t\t\tp.asldB.style.left = (\r\n\t\t\t\t\t(THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding) +\r\n\t\t\t\t\t(displaySlider ? (THIS.sliderSize + 3 * controlPadding + 2 * THIS.controlBorderWidth) : 0)\r\n\t\t\t\t) + 'px';\r\n\t\t\tp.asldB.style.top = THIS.padding + 'px';\r\n\t\t\tp.asldB.style.border = THIS.controlBorderWidth + 'px solid';\r\n\t\t\tp.asldB.style.borderColor = THIS.controlBorderColor;\r\n\r\n\t\t\t// alpha slider mouse area\r\n\t\t\tp.asldM.style.display = displayAlphaSlider ? 'block' : 'none';\r\n\t\t\tp.asldM.style.position = 'absolute';\r\n\t\t\tp.asldM.style.left = (\r\n\t\t\t\t\t(THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding) +\r\n\t\t\t\t\t(displaySlider ? (THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth) : 0)\r\n\t\t\t\t) + 'px';\r\n\t\t\tp.asldM.style.top = 0 + 'px';\r\n\t\t\tp.asldM.style.width = (\r\n\t\t\t\t\t(THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth) +\r\n\t\t\t\t\tMath.max(0, THIS.padding - controlPadding) // remaining padding to the right edge\r\n\t\t\t\t) + 'px';\r\n\t\t\tp.asldM.style.height = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\r\n\t\t\tp.asldM.style.cursor = 'default';\r\n\t\t\tjsc.setData(p.asldM, {\r\n\t\t\t\tinstance: THIS,\r\n\t\t\t\tcontrol: 'asld',\r\n\t\t\t})\r\n\r\n\t\t\t// alpha slider pointer inner and outer border\r\n\t\t\tp.asldPtrIB.style.border =\r\n\t\t\tp.asldPtrOB.style.border =\r\n\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\r\n\r\n\t\t\t// alpha slider pointer outer border\r\n\t\t\tp.asldPtrOB.style.position = 'absolute';\r\n\t\t\tp.asldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\tp.asldPtrOB.style.top = '0';\r\n\r\n\t\t\t// alpha slider pointer middle border\r\n\t\t\tp.asldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\r\n\r\n\t\t\t// alpha slider pointer spacer\r\n\t\t\tp.asldPtrS.style.width = THIS.sliderSize + 'px';\r\n\t\t\tp.asldPtrS.style.height = jsc.pub.sliderInnerSpace + 'px';\r\n\r\n\r\n\t\t\t// palette\r\n\t\t\tp.pal.className = 'jscolor-palette';\r\n\t\t\tp.pal.style.display = pickerDims.palette.rows ? 'block' : 'none';\r\n\t\t\tp.pal.style.position = 'absolute';\r\n\t\t\tp.pal.style.left = THIS.padding + 'px';\r\n\t\t\tp.pal.style.top = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\r\n\r\n\t\t\t// palette's color samples\r\n\r\n\t\t\tp.pal.innerHTML = '';\r\n\r\n\t\t\tvar chessboard = jsc.genColorPreviewCanvas('rgba(0,0,0,0)');\r\n\r\n\t\t\tvar si = 0; // color sample's index\r\n\t\t\tfor (var r = 0; r < pickerDims.palette.rows; r++) {\r\n\t\t\t\tfor (var c = 0; c < pickerDims.palette.cols && si < THIS._palette.length; c++, si++) {\r\n\t\t\t\t\tvar sampleColor = THIS._palette[si];\r\n\t\t\t\t\tvar sampleCssColor = jsc.rgbaColor.apply(null, sampleColor.rgba);\r\n\r\n\t\t\t\t\tvar sc = jsc.createEl('div'); // color sample's color\r\n\t\t\t\t\tsc.style.width = (pickerDims.palette.cellW - 2 * THIS.controlBorderWidth) + 'px';\r\n\t\t\t\t\tsc.style.height = (pickerDims.palette.cellH - 2 * THIS.controlBorderWidth) + 'px';\r\n\t\t\t\t\tsc.style.backgroundColor = sampleCssColor;\r\n\r\n\t\t\t\t\tvar sw = jsc.createEl('div'); // color sample's wrap\r\n\t\t\t\t\tsw.className = 'jscolor-palette-sample';\r\n\t\t\t\t\tsw.style.display = 'block';\r\n\t\t\t\t\tsw.style.position = 'absolute';\r\n\t\t\t\t\tsw.style.left = (\r\n\t\t\t\t\t\t\tpickerDims.palette.cols <= 1 ? 0 :\r\n\t\t\t\t\t\t\tMath.round(10 * (c * ((pickerDims.contentW - pickerDims.palette.cellW) / (pickerDims.palette.cols - 1)))) / 10\r\n\t\t\t\t\t\t) + 'px';\r\n\t\t\t\t\tsw.style.top = (r * (pickerDims.palette.cellH + THIS.paletteSpacing)) + 'px';\r\n\t\t\t\t\tsw.style.border = THIS.controlBorderWidth + 'px solid';\r\n\t\t\t\t\tsw.style.borderColor = THIS.controlBorderColor;\r\n\t\t\t\t\tsw.style.cursor = 'pointer';\r\n\t\t\t\t\tif (sampleColor.rgba[3] !== null && sampleColor.rgba[3] < 1.0) { // only create chessboard background if the sample has transparency\r\n\t\t\t\t\t\tsw.style.backgroundImage = 'url(\\'' + chessboard.canvas.toDataURL() + '\\')';\r\n\t\t\t\t\t\tsw.style.backgroundRepeat = 'repeat';\r\n\t\t\t\t\t\tsw.style.backgroundPosition = 'center center';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tjsc.setData(sw, {\r\n\t\t\t\t\t\tinstance: THIS,\r\n\t\t\t\t\t\tcontrol: 'palette-sample',\r\n\t\t\t\t\t\tcolor: sampleColor,\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsw.addEventListener('click', jsc.onPaletteSampleClick, false);\r\n\t\t\t\t\tsw.appendChild(sc);\r\n\t\t\t\t\tp.pal.appendChild(sw);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// the Close button\r\n\t\t\tfunction setBtnBorder () {\r\n\t\t\t\tvar insetColors = THIS.controlBorderColor.split(/\\s+/);\r\n\t\t\t\tvar outsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1];\r\n\t\t\t\tp.btn.style.borderColor = outsetColor;\r\n\t\t\t}\r\n\t\t\tvar btnPadding = 15; // px\r\n\t\t\tp.btn.className = 'jscolor-btn-close';\r\n\t\t\tp.btn.style.display = THIS.closeButton ? 'block' : 'none';\r\n\t\t\tp.btn.style.position = 'absolute';\r\n\t\t\tp.btn.style.left = THIS.padding + 'px';\r\n\t\t\tp.btn.style.bottom = THIS.padding + 'px';\r\n\t\t\tp.btn.style.padding = '0 ' + btnPadding + 'px';\r\n\t\t\tp.btn.style.maxWidth = (pickerDims.contentW - 2 * THIS.controlBorderWidth - 2 * btnPadding) + 'px';\r\n\t\t\tp.btn.style.overflow = 'hidden';\r\n\t\t\tp.btn.style.height = THIS.buttonHeight + 'px';\r\n\t\t\tp.btn.style.whiteSpace = 'nowrap';\r\n\t\t\tp.btn.style.border = THIS.controlBorderWidth + 'px solid';\r\n\t\t\tsetBtnBorder();\r\n\t\t\tp.btn.style.color = THIS.buttonColor;\r\n\t\t\tp.btn.style.font = '12px sans-serif';\r\n\t\t\tp.btn.style.textAlign = 'center';\r\n\t\t\tp.btn.style.cursor = 'pointer';\r\n\t\t\tp.btn.onmousedown = function () {\r\n\t\t\t\tTHIS.hide();\r\n\t\t\t};\r\n\t\t\tp.btnT.style.lineHeight = THIS.buttonHeight + 'px';\r\n\t\t\tp.btnT.innerHTML = '';\r\n\t\t\tp.btnT.appendChild(window.document.createTextNode(THIS.closeText));\r\n\r\n\t\t\t// reposition the pointers\r\n\t\t\tredrawPad();\r\n\t\t\tredrawSld();\r\n\t\t\tredrawASld();\r\n\r\n\t\t\t// If we are changing the owner without first closing the picker,\r\n\t\t\t// make sure to first deal with the old owner\r\n\t\t\tif (jsc.picker.owner && jsc.picker.owner !== THIS) {\r\n\t\t\t\tjsc.removeClass(jsc.picker.owner.targetElement, jsc.pub.activeClassName);\r\n\t\t\t}\r\n\r\n\t\t\t// Set a new picker owner\r\n\t\t\tjsc.picker.owner = THIS;\r\n\r\n\t\t\t// The redrawPosition() method needs picker.owner to be set, that's why we call it here,\r\n\t\t\t// after setting the owner\r\n\t\t\tif (THIS.container === window.document.body) {\r\n\t\t\t\tjsc.redrawPosition();\r\n\t\t\t} else {\r\n\t\t\t\tjsc._drawPosition(THIS, 0, 0, 'relative', false);\r\n\t\t\t}\r\n\r\n\t\t\tif (p.wrap.parentNode !== THIS.container) {\r\n\t\t\t\tTHIS.container.appendChild(p.wrap);\r\n\t\t\t}\r\n\r\n\t\t\tjsc.addClass(THIS.targetElement, jsc.pub.activeClassName);\r\n\t\t}\r\n\r\n\r\n\t\tfunction redrawPad () {\r\n\t\t\t// redraw the pad pointer\r\n\t\t\tvar yChannel = jsc.getPadYChannel(THIS);\r\n\t\t\tvar x = Math.round((THIS.channels.h / 360) * (THIS.width - 1));\r\n\t\t\tvar y = Math.round((1 - THIS.channels[yChannel] / 100) * (THIS.height - 1));\r\n\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\r\n\t\t\tvar ofs = -Math.floor(crossOuterSize / 2);\r\n\t\t\tjsc.picker.cross.style.left = (x + ofs) + 'px';\r\n\t\t\tjsc.picker.cross.style.top = (y + ofs) + 'px';\r\n\r\n\t\t\t// redraw the slider\r\n\t\t\tswitch (jsc.getSliderChannel(THIS)) {\r\n\t\t\tcase 's':\r\n\t\t\t\tvar rgb1 = jsc.HSV_RGB(THIS.channels.h, 100, THIS.channels.v);\r\n\t\t\t\tvar rgb2 = jsc.HSV_RGB(THIS.channels.h, 0, THIS.channels.v);\r\n\t\t\t\tvar color1 = 'rgb(' +\r\n\t\t\t\t\tMath.round(rgb1[0]) + ',' +\r\n\t\t\t\t\tMath.round(rgb1[1]) + ',' +\r\n\t\t\t\t\tMath.round(rgb1[2]) + ')';\r\n\t\t\t\tvar color2 = 'rgb(' +\r\n\t\t\t\t\tMath.round(rgb2[0]) + ',' +\r\n\t\t\t\t\tMath.round(rgb2[1]) + ',' +\r\n\t\t\t\t\tMath.round(rgb2[2]) + ')';\r\n\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'v':\r\n\t\t\t\tvar rgb = jsc.HSV_RGB(THIS.channels.h, THIS.channels.s, 100);\r\n\t\t\t\tvar color1 = 'rgb(' +\r\n\t\t\t\t\tMath.round(rgb[0]) + ',' +\r\n\t\t\t\t\tMath.round(rgb[1]) + ',' +\r\n\t\t\t\t\tMath.round(rgb[2]) + ')';\r\n\t\t\t\tvar color2 = '#000';\r\n\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t// redraw the alpha slider\r\n\t\t\tjsc.picker.asldGrad.draw(THIS.sliderSize, THIS.height, THIS.toHEXString());\r\n\t\t}\r\n\r\n\r\n\t\tfunction redrawSld () {\r\n\t\t\tvar sldChannel = jsc.getSliderChannel(THIS);\r\n\t\t\tif (sldChannel) {\r\n\t\t\t\t// redraw the slider pointer\r\n\t\t\t\tvar y = Math.round((1 - THIS.channels[sldChannel] / 100) * (THIS.height - 1));\r\n\t\t\t\tjsc.picker.sldPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(jsc.pub.sliderInnerSpace / 2)) + 'px';\r\n\t\t\t}\r\n\r\n\t\t\t// redraw the alpha slider\r\n\t\t\tjsc.picker.asldGrad.draw(THIS.sliderSize, THIS.height, THIS.toHEXString());\r\n\t\t}\r\n\r\n\r\n\t\tfunction redrawASld () {\r\n\t\t\tvar y = Math.round((1 - THIS.channels.a) * (THIS.height - 1));\r\n\t\t\tjsc.picker.asldPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(jsc.pub.sliderInnerSpace / 2)) + 'px';\r\n\t\t}\r\n\r\n\r\n\t\tfunction isPickerOwner () {\r\n\t\t\treturn jsc.picker && jsc.picker.owner === THIS;\r\n\t\t}\r\n\r\n\r\n\t\tfunction onValueKeyDown (ev) {\r\n\t\t\tif (jsc.eventKey(ev) === 'Enter') {\r\n\t\t\t\tif (THIS.valueElement) {\r\n\t\t\t\t\tTHIS.processValueInput(THIS.valueElement.value);\r\n\t\t\t\t}\r\n\t\t\t\tTHIS.tryHide();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction onAlphaKeyDown (ev) {\r\n\t\t\tif (jsc.eventKey(ev) === 'Enter') {\r\n\t\t\t\tif (THIS.alphaElement) {\r\n\t\t\t\t\tTHIS.processAlphaInput(THIS.alphaElement.value);\r\n\t\t\t\t}\r\n\t\t\t\tTHIS.tryHide();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction onValueChange (ev) {\r\n\t\t\tif (jsc.getData(ev, 'internal')) {\r\n\t\t\t\treturn; // skip if the event was internally triggered by jscolor\r\n\t\t\t}\r\n\r\n\t\t\tvar oldVal = THIS.valueElement.value;\r\n\r\n\t\t\tTHIS.processValueInput(THIS.valueElement.value); // this might change the value\r\n\r\n\t\t\tjsc.triggerCallback(THIS, 'onChange');\r\n\r\n\t\t\tif (THIS.valueElement.value !== oldVal) {\r\n\t\t\t\t// value was additionally changed -> let's trigger the change event again, even though it was natively dispatched\r\n\t\t\t\tjsc.triggerInputEvent(THIS.valueElement, 'change', true, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction onAlphaChange (ev) {\r\n\t\t\tif (jsc.getData(ev, 'internal')) {\r\n\t\t\t\treturn; // skip if the event was internally triggered by jscolor\r\n\t\t\t}\r\n\r\n\t\t\tvar oldVal = THIS.alphaElement.value;\r\n\r\n\t\t\tTHIS.processAlphaInput(THIS.alphaElement.value); // this might change the value\r\n\r\n\t\t\tjsc.triggerCallback(THIS, 'onChange');\r\n\r\n\t\t\t// triggering valueElement's onChange (because changing alpha changes the entire color, e.g. with rgba format)\r\n\t\t\tjsc.triggerInputEvent(THIS.valueElement, 'change', true, true);\r\n\r\n\t\t\tif (THIS.alphaElement.value !== oldVal) {\r\n\t\t\t\t// value was additionally changed -> let's trigger the change event again, even though it was natively dispatched\r\n\t\t\t\tjsc.triggerInputEvent(THIS.alphaElement, 'change', true, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction onValueInput (ev) {\r\n\t\t\tif (jsc.getData(ev, 'internal')) {\r\n\t\t\t\treturn; // skip if the event was internally triggered by jscolor\r\n\t\t\t}\r\n\r\n\t\t\tif (THIS.valueElement) {\r\n\t\t\t\tTHIS.fromString(THIS.valueElement.value, jsc.flags.leaveValue);\r\n\t\t\t}\r\n\r\n\t\t\tjsc.triggerCallback(THIS, 'onInput');\r\n\r\n\t\t\t// triggering valueElement's onInput\r\n\t\t\t// (not needed, it was dispatched normally by the browser)\r\n\t\t}\r\n\r\n\r\n\t\tfunction onAlphaInput (ev) {\r\n\t\t\tif (jsc.getData(ev, 'internal')) {\r\n\t\t\t\treturn; // skip if the event was internally triggered by jscolor\r\n\t\t\t}\r\n\r\n\t\t\tif (THIS.alphaElement) {\r\n\t\t\t\tTHIS.fromHSVA(null, null, null, parseFloat(THIS.alphaElement.value), jsc.flags.leaveAlpha);\r\n\t\t\t}\r\n\r\n\t\t\tjsc.triggerCallback(THIS, 'onInput');\r\n\r\n\t\t\t// triggering valueElement's onInput (because changing alpha changes the entire color, e.g. with rgba format)\r\n\t\t\tjsc.triggerInputEvent(THIS.valueElement, 'input', true, true);\r\n\t\t}\r\n\r\n\r\n\t\t// let's process the DEPRECATED 'options' property (this will be later removed)\r\n\t\tif (jsc.pub.options) {\r\n\t\t\t// let's set custom default options, if specified\r\n\t\t\tfor (var opt in jsc.pub.options) {\r\n\t\t\t\tif (jsc.pub.options.hasOwnProperty(opt)) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tsetOption(opt, jsc.pub.options[opt]);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t// let's apply configuration presets\r\n\t\t//\r\n\t\tvar presetsArr = [];\r\n\r\n\t\tif (opts.preset) {\r\n\t\t\tif (typeof opts.preset === 'string') {\r\n\t\t\t\tpresetsArr = opts.preset.split(/\\s+/);\r\n\t\t\t} else if (Array.isArray(opts.preset)) {\r\n\t\t\t\tpresetsArr = opts.preset.slice(); // slice() to clone\r\n\t\t\t} else {\r\n\t\t\t\tconsole.warn('Unrecognized preset value');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// always use the 'default' preset. If it's not listed, append it to the end.\r\n\t\tif (presetsArr.indexOf('default') === -1) {\r\n\t\t\tpresetsArr.push('default');\r\n\t\t}\r\n\r\n\t\t// let's apply the presets in reverse order, so that should there be any overlapping options,\r\n\t\t// the formerly listed preset will override the latter\r\n\t\tfor (var i = presetsArr.length - 1; i >= 0; i -= 1) {\r\n\t\t\tvar pres = presetsArr[i];\r\n\t\t\tif (!pres) {\r\n\t\t\t\tcontinue; // preset is empty string\r\n\t\t\t}\r\n\t\t\tif (!jsc.pub.presets.hasOwnProperty(pres)) {\r\n\t\t\t\tconsole.warn('Unknown preset: %s', pres);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tfor (var opt in jsc.pub.presets[pres]) {\r\n\t\t\t\tif (jsc.pub.presets[pres].hasOwnProperty(opt)) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tsetOption(opt, jsc.pub.presets[pres][opt]);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t// let's set specific options for this color picker\r\n\t\tvar nonProperties = [\r\n\t\t\t// these options won't be set as instance properties\r\n\t\t\t'preset',\r\n\t\t];\r\n\t\tfor (var opt in opts) {\r\n\t\t\tif (opts.hasOwnProperty(opt)) {\r\n\t\t\t\tif (nonProperties.indexOf(opt) === -1) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tsetOption(opt, opts[opt]);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//\r\n\t\t// Install the color picker on chosen element(s)\r\n\t\t//\r\n\r\n\r\n\t\t// Determine picker's container element\r\n\t\tif (this.container === undefined) {\r\n\t\t\tthis.container = window.document.body; // default container is BODY element\r\n\r\n\t\t} else { // explicitly set to custom element\r\n\t\t\tthis.container = jsc.node(this.container);\r\n\t\t}\r\n\r\n\t\tif (!this.container) {\r\n\t\t\tthrow new Error('Cannot instantiate color picker without a container element');\r\n\t\t}\r\n\r\n\r\n\t\t// Fetch the target element\r\n\t\tthis.targetElement = jsc.node(targetElement);\r\n\r\n\t\tif (!this.targetElement) {\r\n\t\t\t// temporarily customized error message to help with migrating from versions prior to 2.2\r\n\t\t\tif (typeof targetElement === 'string' && /^[a-zA-Z][\\w:.-]*$/.test(targetElement)) {\r\n\t\t\t\t// targetElement looks like valid ID\r\n\t\t\t\tvar possiblyId = targetElement;\r\n\t\t\t\tthrow new Error('If \\'' + possiblyId + '\\' is supposed to be an ID, please use \\'#' + possiblyId + '\\' or any valid CSS selector.');\r\n\t\t\t}\r\n\r\n\t\t\tthrow new Error('Cannot instantiate color picker without a target element');\r\n\t\t}\r\n\r\n\t\tif (this.targetElement.jscolor && this.targetElement.jscolor instanceof jsc.pub) {\r\n\t\t\tthrow new Error('Color picker already installed on this element');\r\n\t\t}\r\n\r\n\r\n\t\t// link this instance with the target element\r\n\t\tthis.targetElement.jscolor = this;\r\n\t\tjsc.addClass(this.targetElement, jsc.pub.className);\r\n\r\n\t\t// register this instance\r\n\t\tjsc.instances.push(this);\r\n\r\n\r\n\t\t// if target is BUTTON\r\n\t\tif (jsc.isButton(this.targetElement)) {\r\n\r\n\t\t\tif (this.targetElement.type.toLowerCase() !== 'button') {\r\n\t\t\t\t// on buttons, always force type to be 'button', e.g. in situations the target <button> has no type\r\n\t\t\t\t// and thus defaults to 'submit' and would submit the form when clicked\r\n\t\t\t\tthis.targetElement.type = 'button';\r\n\t\t\t}\r\n\r\n\t\t\tif (jsc.isButtonEmpty(this.targetElement)) { // empty button\r\n\t\t\t\t// it is important to clear element's contents first.\r\n\t\t\t\t// if we're re-instantiating color pickers on DOM that has been modified by changing page's innerHTML,\r\n\t\t\t\t// we would keep adding more non-breaking spaces to element's content (because element's contents survive\r\n\t\t\t\t// innerHTML changes, but picker instances don't)\r\n\t\t\t\tjsc.removeChildren(this.targetElement);\r\n\r\n\t\t\t\t// let's insert a non-breaking space\r\n\t\t\t\tthis.targetElement.appendChild(window.document.createTextNode('\\xa0'));\r\n\r\n\t\t\t\t// set min-width = previewSize, if not already greater\r\n\t\t\t\tvar compStyle = jsc.getCompStyle(this.targetElement);\r\n\t\t\t\tvar currMinWidth = parseFloat(compStyle['min-width']) || 0;\r\n\t\t\t\tif (currMinWidth < this.previewSize) {\r\n\t\t\t\t\tjsc.setStyle(this.targetElement, {\r\n\t\t\t\t\t\t'min-width': this.previewSize + 'px',\r\n\t\t\t\t\t}, this.forceStyle);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Determine the value element\r\n\t\tif (this.valueElement === undefined) {\r\n\t\t\tif (jsc.isTextInput(this.targetElement)) {\r\n\t\t\t\t// for text inputs, default valueElement is targetElement\r\n\t\t\t\tthis.valueElement = this.targetElement;\r\n\t\t\t} else {\r\n\t\t\t\t// leave it undefined\r\n\t\t\t}\r\n\r\n\t\t} else if (this.valueElement === null) { // explicitly set to null\r\n\t\t\t// leave it null\r\n\r\n\t\t} else { // explicitly set to custom element\r\n\t\t\tthis.valueElement = jsc.node(this.valueElement);\r\n\t\t}\r\n\r\n\t\t// Determine the alpha element\r\n\t\tif (this.alphaElement) {\r\n\t\t\tthis.alphaElement = jsc.node(this.alphaElement);\r\n\t\t}\r\n\r\n\t\t// Determine the preview element\r\n\t\tif (this.previewElement === undefined) {\r\n\t\t\tthis.previewElement = this.targetElement; // default previewElement is targetElement\r\n\r\n\t\t} else if (this.previewElement === null) { // explicitly set to null\r\n\t\t\t// leave it null\r\n\r\n\t\t} else { // explicitly set to custom element\r\n\t\t\tthis.previewElement = jsc.node(this.previewElement);\r\n\t\t}\r\n\r\n\t\t// valueElement\r\n\t\tif (this.valueElement && jsc.isTextInput(this.valueElement)) {\r\n\r\n\t\t\t// If the value element has onInput event already set, we need to detach it and attach AFTER our listener.\r\n\t\t\t// otherwise the picker instance would still contain the old color when accessed from the onInput handler.\r\n\t\t\tvar valueElementOrigEvents = {\r\n\t\t\t\tonInput: this.valueElement.oninput\r\n\t\t\t};\r\n\t\t\tthis.valueElement.oninput = null;\r\n\r\n\t\t\tthis.valueElement.addEventListener('keydown', onValueKeyDown, false);\r\n\t\t\tthis.valueElement.addEventListener('change', onValueChange, false);\r\n\t\t\tthis.valueElement.addEventListener('input', onValueInput, false);\r\n\t\t\t// the original event listener must be attached AFTER our handler (to let it first set picker's color)\r\n\t\t\tif (valueElementOrigEvents.onInput) {\r\n\t\t\t\tthis.valueElement.addEventListener('input', valueElementOrigEvents.onInput, false);\r\n\t\t\t}\r\n\r\n\t\t\tthis.valueElement.setAttribute('autocomplete', 'off');\r\n\t\t\tthis.valueElement.setAttribute('autocorrect', 'off');\r\n\t\t\tthis.valueElement.setAttribute('autocapitalize', 'off');\r\n\t\t\tthis.valueElement.setAttribute('spellcheck', false);\r\n\t\t}\r\n\r\n\t\t// alphaElement\r\n\t\tif (this.alphaElement && jsc.isTextInput(this.alphaElement)) {\r\n\t\t\tthis.alphaElement.addEventListener('keydown', onAlphaKeyDown, false);\r\n\t\t\tthis.alphaElement.addEventListener('change', onAlphaChange, false);\r\n\t\t\tthis.alphaElement.addEventListener('input', onAlphaInput, false);\r\n\r\n\t\t\tthis.alphaElement.setAttribute('autocomplete', 'off');\r\n\t\t\tthis.alphaElement.setAttribute('autocorrect', 'off');\r\n\t\t\tthis.alphaElement.setAttribute('autocapitalize', 'off');\r\n\t\t\tthis.alphaElement.setAttribute('spellcheck', false);\r\n\t\t}\r\n\r\n\t\t// determine initial color value\r\n\t\t//\r\n\t\tvar initValue = 'FFFFFF';\r\n\r\n\t\tif (this.value !== undefined) {\r\n\t\t\tinitValue = this.value; // get initial color from the 'value' property\r\n\t\t} else if (this.valueElement && this.valueElement.value !== undefined) {\r\n\t\t\tinitValue = this.valueElement.value; // get initial color from valueElement's value\r\n\t\t}\r\n\r\n\t\t// determine initial alpha value\r\n\t\t//\r\n\t\tvar initAlpha = undefined;\r\n\r\n\t\tif (this.alpha !== undefined) {\r\n\t\t\tinitAlpha = (''+this.alpha); // get initial alpha value from the 'alpha' property\r\n\t\t} else if (this.alphaElement && this.alphaElement.value !== undefined) {\r\n\t\t\tinitAlpha = this.alphaElement.value; // get initial color from alphaElement's value\r\n\t\t}\r\n\r\n\t\t// determine current format based on the initial color value\r\n\t\t//\r\n\t\tthis._currentFormat = null;\r\n\r\n\t\tif (['auto', 'any'].indexOf(this.format.toLowerCase()) > -1) {\r\n\t\t\t// format is 'auto' or 'any' -> let's auto-detect current format\r\n\t\t\tvar color = jsc.parseColorString(initValue);\r\n\t\t\tthis._currentFormat = color ? color.format : 'hex';\r\n\t\t} else {\r\n\t\t\t// format is specified\r\n\t\t\tthis._currentFormat = this.format.toLowerCase();\r\n\t\t}\r\n\r\n\r\n\t\t// let's parse the initial color value and expose color's preview\r\n\t\tthis.processValueInput(initValue);\r\n\r\n\t\t// let's also parse and expose the initial alpha value, if any\r\n\t\t//\r\n\t\t// Note: If the initial color value contains alpha value in it (e.g. in rgba format),\r\n\t\t// this will overwrite it. So we should only process alpha input if there was any initial\r\n\t\t// alpha explicitly set, otherwise we could needlessly lose initial value's alpha\r\n\t\tif (initAlpha !== undefined) {\r\n\t\t\tthis.processAlphaInput(initAlpha);\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n//================================\r\n// Public properties and methods\r\n//================================\r\n\r\n//\r\n// These will be publicly available via jscolor.<name> and JSColor.<name>\r\n//\r\n\r\n\r\n// class that will be set to elements having jscolor installed on them\r\njsc.pub.className = 'jscolor';\r\n\r\n\r\n// class that will be set to elements having jscolor active on them\r\njsc.pub.activeClassName = 'jscolor-active';\r\n\r\n\r\n// whether to try to parse the options string by evaluating it using 'new Function()'\r\n// in case it could not be parsed with JSON.parse()\r\njsc.pub.looseJSON = true;\r\n\r\n\r\n// presets\r\njsc.pub.presets = {};\r\n\r\n// built-in presets\r\njsc.pub.presets['default'] = {}; // baseline for customization\r\n\r\njsc.pub.presets['light'] = { // default color scheme\r\n\tbackgroundColor: 'rgba(255,255,255,1)',\r\n\tcontrolBorderColor: 'rgba(187,187,187,1)',\r\n\tbuttonColor: 'rgba(0,0,0,1)',\r\n};\r\njsc.pub.presets['dark'] = {\r\n\tbackgroundColor: 'rgba(51,51,51,1)',\r\n\tcontrolBorderColor: 'rgba(153,153,153,1)',\r\n\tbuttonColor: 'rgba(240,240,240,1)',\r\n};\r\n\r\njsc.pub.presets['small'] = { width:101, height:101, padding:10, sliderSize:14, paletteCols:8 };\r\njsc.pub.presets['medium'] = { width:181, height:101, padding:12, sliderSize:16, paletteCols:10 }; // default size\r\njsc.pub.presets['large'] = { width:271, height:151, padding:12, sliderSize:24, paletteCols:15 };\r\n\r\njsc.pub.presets['thin'] = { borderWidth:1, controlBorderWidth:1, pointerBorderWidth:1 }; // default thickness\r\njsc.pub.presets['thick'] = { borderWidth:2, controlBorderWidth:2, pointerBorderWidth:2 };\r\n\r\n\r\n// size of space in the sliders\r\njsc.pub.sliderInnerSpace = 3; // px\r\n\r\n// transparency chessboard\r\njsc.pub.chessboardSize = 8; // px\r\njsc.pub.chessboardColor1 = '#666666';\r\njsc.pub.chessboardColor2 = '#999999';\r\n\r\n// preview separator\r\njsc.pub.previewSeparator = ['rgba(255,255,255,.65)', 'rgba(128,128,128,.65)'];\r\n\r\n\r\n// Initializes jscolor\r\njsc.pub.init = function () {\r\n\tif (jsc.initialized) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// attach some necessary handlers\r\n\twindow.document.addEventListener('mousedown', jsc.onDocumentMouseDown, false);\r\n\twindow.document.addEventListener('keyup', jsc.onDocumentKeyUp, false);\r\n\twindow.addEventListener('resize', jsc.onWindowResize, false);\r\n\twindow.addEventListener('scroll', jsc.onWindowScroll, false);\r\n\r\n\t// install jscolor on current DOM\r\n\tjsc.pub.install();\r\n\r\n\tjsc.initialized = true;\r\n\r\n\t// call functions waiting in the queue\r\n\twhile (jsc.readyQueue.length) {\r\n\t\tvar func = jsc.readyQueue.shift();\r\n\t\tfunc();\r\n\t}\r\n};\r\n\r\n\r\n// Installs jscolor on current DOM tree\r\njsc.pub.install = function (rootNode) {\r\n\tvar success = true;\r\n\r\n\ttry {\r\n\t\tjsc.installBySelector('[data-jscolor]', rootNode);\r\n\t} catch (e) {\r\n\t\tsuccess = false;\r\n\t\tconsole.warn(e);\r\n\t}\r\n\r\n\t// for backward compatibility with DEPRECATED installation using class name\r\n\tif (jsc.pub.lookupClass) {\r\n\t\ttry {\r\n\t\t\tjsc.installBySelector(\r\n\t\t\t\t(\r\n\t\t\t\t\t'input.' + jsc.pub.lookupClass + ', ' +\r\n\t\t\t\t\t'button.' + jsc.pub.lookupClass\r\n\t\t\t\t),\r\n\t\t\t\trootNode\r\n\t\t\t);\r\n\t\t} catch (e) {}\r\n\t}\r\n\r\n\treturn success;\r\n};\r\n\r\n\r\n// Registers function to be called as soon as jscolor is initialized (or immediately, if it already is).\r\n//\r\njsc.pub.ready = function (func) {\r\n\tif (typeof func !== 'function') {\r\n\t\tconsole.warn('Passed value is not a function');\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (jsc.initialized) {\r\n\t\tfunc();\r\n\t} else {\r\n\t\tjsc.readyQueue.push(func);\r\n\t}\r\n\treturn true;\r\n};\r\n\r\n\r\n// Triggers given input event(s) (e.g. 'input' or 'change') on all color pickers.\r\n//\r\n// It is possible to specify multiple events separated with a space.\r\n// If called before jscolor is initialized, then the events will be triggered after initialization.\r\n//\r\njsc.pub.trigger = function (eventNames) {\r\n\tvar triggerNow = function () {\r\n\t\tjsc.triggerGlobal(eventNames);\r\n\t};\r\n\r\n\tif (jsc.initialized) {\r\n\t\ttriggerNow();\r\n\t} else {\r\n\t\tjsc.pub.ready(triggerNow);\r\n\t}\r\n};\r\n\r\n\r\n// Hides current color picker box\r\njsc.pub.hide = function () {\r\n\tif (jsc.picker && jsc.picker.owner) {\r\n\t\tjsc.picker.owner.hide();\r\n\t}\r\n};\r\n\r\n\r\n// Returns a data URL of a gray chessboard image that indicates transparency\r\njsc.pub.chessboard = function (color) {\r\n\tif (!color) {\r\n\t\tcolor = 'rgba(0,0,0,0)';\r\n\t}\r\n\tvar preview = jsc.genColorPreviewCanvas(color);\r\n\treturn preview.canvas.toDataURL();\r\n};\r\n\r\n\r\n// Returns a data URL of a gray chessboard image that indicates transparency\r\njsc.pub.background = function (color) {\r\n\tvar backgrounds = [];\r\n\r\n\t// CSS gradient for background color preview\r\n\tbackgrounds.push(jsc.genColorPreviewGradient(color));\r\n\r\n\t// data URL of generated PNG image with a gray transparency chessboard\r\n\tvar preview = jsc.genColorPreviewCanvas();\r\n\tbackgrounds.push([\r\n\t\t'url(\\'' + preview.canvas.toDataURL() + '\\')',\r\n\t\t'left top',\r\n\t\t'repeat',\r\n\t].join(' '));\r\n\r\n\treturn backgrounds.join(', ');\r\n};\r\n\r\n\r\n//\r\n// DEPRECATED properties and methods\r\n//\r\n\r\n\r\n// DEPRECATED. Use jscolor.presets.default instead.\r\n//\r\n// Custom default options for all color pickers, e.g. { hash: true, width: 300 }\r\njsc.pub.options = {};\r\n\r\n\r\n// DEPRECATED. Use data-jscolor attribute instead, which installs jscolor on given element.\r\n//\r\n// By default, we'll search for all elements with class=\"jscolor\" and install a color picker on them.\r\n//\r\n// You can change what class name will be looked for by setting the property jscolor.lookupClass\r\n// anywhere in your HTML document. To completely disable the automatic lookup, set it to null.\r\n//\r\njsc.pub.lookupClass = 'jscolor';\r\n\r\n\r\n// DEPRECATED. Use data-jscolor attribute instead, which installs jscolor on given element.\r\n//\r\n// Install jscolor on all elements that have the specified class name\r\njsc.pub.installByClassName = function () {\r\n\tconsole.error('jscolor.installByClassName() is DEPRECATED. Use data-jscolor=\"\" attribute instead of a class name.' + jsc.docsRef);\r\n\treturn false;\r\n};\r\n\r\n\r\njsc.register();\r\n\r\n\r\nreturn jsc.pub;\r\n\r\n\r\n})(); // END jscolor\r\n\r\n\r\nif (typeof window.jscolor === 'undefined') {\r\n\twindow.jscolor = window.JSColor = jscolor;\r\n}\r\n\r\n\r\n// END jscolor code\r\n\r\nreturn jscolor;\r\n\r\n}); // END factory\r\n"]}